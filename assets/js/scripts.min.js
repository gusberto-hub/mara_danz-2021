function Util(){}if(Util.hasClass=function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},Util.addClass=function(t,e){var i=e.split(" ");t.classList?t.classList.add(i[0]):Util.hasClass(t,i[0])||(t.className+=" "+i[0]),i.length>1&&Util.addClass(t,i.slice(1).join(" "))},Util.removeClass=function(t,e){var i=e.split(" ");if(t.classList)t.classList.remove(i[0]);else if(Util.hasClass(t,i[0])){var s=new RegExp("(\\s|^)"+i[0]+"(\\s|$)");t.className=t.className.replace(s," ")}i.length>1&&Util.removeClass(t,i.slice(1).join(" "))},Util.toggleClass=function(t,e,i){i?Util.addClass(t,e):Util.removeClass(t,e)},Util.setAttributes=function(t,e){for(var i in e)t.setAttribute(i,e[i])},Util.getChildrenByClassName=function(t,e){t.children;for(var i=[],s=0;s<t.children.length;s++)Util.hasClass(t.children[s],e)&&i.push(t.children[s]);return i},Util.is=function(t,e){if(e.nodeType)return t===e;for(var i="string"==typeof e?document.querySelectorAll(e):e,s=i.length;s--;)if(i[s]===t)return!0;return!1},Util.setHeight=function(t,e,i,s,n){var r=e-t,o=null,a=function(e){o||(o=e);var h=e-o,l=parseInt(h/s*r+t);i.style.height=l+"px",h<s?window.requestAnimationFrame(a):n()};i.style.height=t+"px",window.requestAnimationFrame(a)},Util.scrollTo=function(t,e,i,s){var n=s||window,r=n.scrollTop||document.documentElement.scrollTop,o=null;s||(r=window.scrollY||document.documentElement.scrollTop);var a=function(s){o||(o=s);var h=s-o;h>e&&(h=e);var l=Math.easeInOutQuad(h,r,t-r,e);n.scrollTo(0,l),h<e?window.requestAnimationFrame(a):i&&i()};window.requestAnimationFrame(a)},Util.moveFocus=function(t){t||(t=document.getElementsByTagName("body")[0]),t.focus(),document.activeElement!==t&&(t.setAttribute("tabindex","-1"),t.focus())},Util.getIndexInArray=function(t,e){return Array.prototype.indexOf.call(t,e)},Util.cssSupports=function(t,e){return"CSS"in window?CSS.supports(t,e):t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))in document.body.style},Util.extend=function(){var t={},e=!1,i=0,s=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],i++);for(var n=function(i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e&&"[object Object]"===Object.prototype.toString.call(i[s])?t[s]=extend(!0,t[s],i[s]):t[s]=i[s])};i<s;i++){var r=arguments[i];n(r)}return t},Util.osHasReducedMotion=function(){if(!window.matchMedia)return!1;var t=window.matchMedia("(prefers-reduced-motion: reduce)");return!!t&&t.matches},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}),"function"!=typeof window.CustomEvent){function CustomEvent(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}Math.easeInOutQuad=function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},Math.easeInQuart=function(t,e,i,s){return i*(t/=s)*t*t*t+e},Math.easeOutQuart=function(t,e,i,s){return t/=s,-i*(--t*t*t*t-1)+e},Math.easeInOutQuart=function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},Math.easeOutElastic=function(t,e,i,s){var n=1.70158,r=.7*s,o=i;if(0==t)return e;if(1==(t/=s))return e+i;if(r||(r=.3*s),o<Math.abs(i)){o=i;n=r/4}else n=r/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*t)*Math.sin((t*s-n)*(2*Math.PI)/r)+i+e},function(){var t=document.getElementsByClassName("js-tab-focus");function e(){t.length>0&&(s(!1),window.addEventListener("keydown",i)),window.removeEventListener("mousedown",e)}function i(t){9===t.keyCode&&(s(!0),window.removeEventListener("keydown",i),window.addEventListener("mousedown",e))}function s(e){for(var i=e?"":"none",s=0;s<t.length;s++)t[s].style.setProperty("outline",i)}window.addEventListener("mousedown",e)}(),function(){var t=function(t){this.element=t,this.items=Util.getChildrenByClassName(this.element,"js-accordion__item"),this.version=this.element.getAttribute("data-version")?"-"+this.element.getAttribute("data-version"):"",this.showClass="accordion"+this.version+"__item--is-open",this.animateHeight="on"==this.element.getAttribute("data-animation"),this.multiItems=!("off"==this.element.getAttribute("data-multi-items")),this.deepLinkOn="on"==this.element.getAttribute("data-deep-link"),this.initAccordion()};t.prototype.initAccordion=function(){for(var t=0;t<this.items.length;t++){var e=this.items[t].getElementsByTagName("button")[0],i=this.items[t].getElementsByClassName("js-accordion__panel")[0],s=Util.hasClass(this.items[t],this.showClass)?"true":"false";Util.setAttributes(e,{"aria-expanded":s,"aria-controls":"accordion-content-"+t,id:"accordion-header-"+t}),Util.addClass(e,"js-accordion__trigger"),Util.setAttributes(i,{"aria-labelledby":"accordion-header-"+t,id:"accordion-content-"+t})}this.initAccordionEvents(),this.initDeepLink()},t.prototype.initAccordionEvents=function(){var t=this;this.element.addEventListener("click",(function(e){var i=e.target.closest(".js-accordion__trigger");i&&Util.getIndexInArray(t.items,i.parentElement)>=0&&t.triggerAccordion(i)}))},t.prototype.triggerAccordion=function(t){var e="true"===t.getAttribute("aria-expanded");this.animateAccordion(t,e,!1),!e&&this.deepLinkOn&&history.replaceState(null,"","#"+t.getAttribute("aria-controls"))},t.prototype.animateAccordion=function(t,e,i){var s=t.closest(".js-accordion__item"),n=s.getElementsByClassName("js-accordion__panel")[0],r=e?"false":"true";e||Util.addClass(s,this.showClass),t.setAttribute("aria-expanded",r),this.resetContentVisibility(s,n,e),(!this.multiItems&&!e||i)&&this.closeSiblings(s)},t.prototype.resetContentVisibility=function(t,e,i){Util.toggleClass(t,this.showClass,!i),e.removeAttribute("style"),i&&!this.multiItems&&this.moveContent()},t.prototype.closeSiblings=function(t){for(var e=Util.getIndexInArray(this.items,t),i=0;i<this.items.length;i++)if(Util.hasClass(this.items[i],this.showClass)&&i!=e)return this.animateAccordion(this.items[i].getElementsByClassName("js-accordion__trigger")[0],!0,!1),!1},t.prototype.moveContent=function(){var t=this.element.getElementsByClassName(this.showClass);if(0!=t.length){var e=t[0].getBoundingClientRect();if(e.top<0||e.top>window.innerHeight){var i=window.scrollY||document.documentElement.scrollTop;window.scrollTo(0,e.top+i)}}},t.prototype.initDeepLink=function(){if(this.deepLinkOn){var t=window.location.hash.substr(1);if(t&&""!=t){var e=this.element.querySelector('.js-accordion__trigger[aria-controls="'+t+'"]');e&&"true"!==e.getAttribute("aria-expanded")&&(this.animateAccordion(e,!1,!0),setTimeout((function(){e.scrollIntoView(!0)})))}}},window.Accordion=t;var e=document.getElementsByClassName("js-accordion");if(e.length>0)for(var i=0;i<e.length;i++)!function(i){new t(e[i])}(i)}(),function(){var t=function(t){"CSS"in window&&CSS.supports("color","var(--color-var)")&&(this.element=t,this.scrollDuration=parseInt(this.element.getAttribute("data-duration"))||1e3,this.dataElementY=this.element.getAttribute("data-scrollable-element-y")||this.element.getAttribute("data-scrollable-element")||this.element.getAttribute("data-element"),this.scrollElementY=this.dataElementY?document.querySelector(this.dataElementY):window,this.dataElementX=this.element.getAttribute("data-scrollable-element-x"),this.scrollElementX=this.dataElementY?document.querySelector(this.dataElementX):window,this.initScroll())};t.prototype.initScroll=function(){var t=this;this.element.addEventListener("click",(function(e){e.preventDefault();var i=e.target.closest(".js-smooth-scroll").getAttribute("href").replace("#",""),s=document.getElementById(i),n=s.getAttribute("tabindex"),r=t.scrollElementY.scrollTop||document.documentElement.scrollTop;t.dataElementY||(r=window.scrollY||document.documentElement.scrollTop);var o=!!t.dataElementY&&t.scrollElementY,a=t.getFixedElementHeight();Util.scrollTo(s.getBoundingClientRect().top+r-a,t.scrollDuration,(function(){t.scrollHorizontally(s,a),Util.moveFocus(s),history.pushState(!1,!1,"#"+i),t.resetTarget(s,n)}),o)}))},t.prototype.scrollHorizontally=function(t,e){var i=!!this.dataElementX&&this.scrollElementX,s=this.scrollElementX?this.scrollElementX.scrollLeft:document.documentElement.scrollLeft,n=t.getBoundingClientRect().left+s-e,r=this.scrollDuration,o=i||window,a=o.scrollLeft||document.documentElement.scrollLeft,h=null;if(i||(a=window.scrollX||document.documentElement.scrollLeft),!(Math.abs(a-n)<5)){var l=function(t){h||(h=t);var e=t-h;e>r&&(e=r);var i=Math.easeInOutQuad(e,a,n-a,r);o.scrollTo({left:i}),e<r&&window.requestAnimationFrame(l)};window.requestAnimationFrame(l)}},t.prototype.resetTarget=function(t,e){parseInt(t.getAttribute("tabindex"))<0&&(t.style.outline="none",!e&&t.removeAttribute("tabindex"))},t.prototype.getFixedElementHeight=function(){var t=this.dataElementY?this.scrollElementY:document.documentElement,e=parseInt(getComputedStyle(t).getPropertyValue("scroll-padding"));if(isNaN(e)){e=0;var i=document.querySelector(this.element.getAttribute("data-fixed-element"));i&&(e=parseInt(i.getBoundingClientRect().height))}return e};var e=document.getElementsByClassName("js-smooth-scroll");if(e.length>0&&!Util.cssSupports("scroll-behavior","smooth")&&window.requestAnimationFrame)for(var i=0;i<e.length;i++)!function(i){new t(e[i])}(i)}(),
/*!
 * Flickity PACKAGED v2.2.2
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2021 Metafizzy
 */
function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,(function(t,e){"use strict";var i=Array.prototype.slice,s=t.console,n=void 0===s?function(){}:function(t){s.error(t)};function r(s,r,a){function h(t,e,i){var r,o="$()."+s+'("'+e+'")';return t.each((function(t,h){var l=a.data(h,s);if(l){var c=l[e];if(c&&"_"!=e.charAt(0)){var u=c.apply(l,i);r=void 0===r?u:r}else n(o+" is not a valid method")}else n(s+" not initialized. Cannot call methods, i.e. "+o)})),void 0!==r?r:t}function l(t,e){t.each((function(t,i){var n=a.data(i,s);n?(n.option(e),n._init()):(n=new r(i,e),a.data(i,s,n))}))}(a=a||e||t.jQuery)&&(r.prototype.option||(r.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[s]=function(t){if("string"==typeof t){var e=i.call(arguments,1);return h(this,t,e)}return l(this,t),this},o(a))}function o(t){!t||t&&t.bridget||(t.bridget=r)}return o(e||t.jQuery),r})),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,(function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},s=i[t]=i[t]||[];return-1==s.indexOf(e)&&s.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var s=i.indexOf(e);return-1!=s&&i.splice(s,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var s=this._onceEvents&&this._onceEvents[t],n=0;n<i.length;n++){var r=i[n];s&&s[r]&&(this.off(t,r),delete s[r]),r.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})),
/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */
function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,(function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},i=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],s=i.length;function n(t){var i=getComputedStyle(t);return i||e("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),i}var r,o=!1;function a(){if(!o){o=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var s=n(e);r=200==Math.round(t(s.width)),h.isBoxSizeOuter=r,i.removeChild(e)}}function h(e){if(a(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var o=n(e);if("none"==o.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<s;e++)t[i[e]]=0;return t}();var h={};h.width=e.offsetWidth,h.height=e.offsetHeight;for(var l=h.isBorderBox="border-box"==o.boxSizing,c=0;c<s;c++){var u=i[c],d=o[u],p=parseFloat(d);h[u]=isNaN(p)?0:p}var f=h.paddingLeft+h.paddingRight,g=h.paddingTop+h.paddingBottom,m=h.marginLeft+h.marginRight,v=h.marginTop+h.marginBottom,y=h.borderLeftWidth+h.borderRightWidth,b=h.borderTopWidth+h.borderBottomWidth,w=l&&r,x=t(o.width);!1!==x&&(h.width=x+(w?0:f+y));var E=t(o.height);return!1!==E&&(h.height=E+(w?0:g+b)),h.innerWidth=h.width-(f+y),h.innerHeight=h.height-(g+b),h.outerWidth=h.width+m,h.outerHeight=h.height+v,h}}return h})),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,(function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var s=e[i]+"MatchesSelector";if(t[s])return s}}();return function(e,i){return e[t](i)}})),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,(function(t,e){var i={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},s=Array.prototype.slice;i.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?s.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,s){t=i.makeArray(t);var n=[];return t.forEach((function(t){if(t instanceof HTMLElement)if(s){e(t,s)&&n.push(t);for(var i=t.querySelectorAll(s),r=0;r<i.length;r++)n.push(i[r])}else n.push(t)})),n},i.debounceMethod=function(t,e,i){i=i||100;var s=t.prototype[e],n=e+"Timeout";t.prototype[e]=function(){var t=this[n];clearTimeout(t);var e=arguments,r=this;this[n]=setTimeout((function(){s.apply(r,e),delete r[n]}),i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,(function(t,e,i){return e+"-"+i})).toLowerCase()};var n=t.console;return i.htmlInit=function(e,s){i.docReady((function(){var r=i.toDashed(s),o="data-"+r,a=document.querySelectorAll("["+o+"]"),h=document.querySelectorAll(".js-"+r),l=i.makeArray(a).concat(i.makeArray(h)),c=o+"-options",u=t.jQuery;l.forEach((function(t){var i,r=t.getAttribute(o)||t.getAttribute(c);try{i=r&&JSON.parse(r)}catch(r){return void(n&&n.error("Error parsing "+o+" on "+t.className+": "+r))}var a=new e(t,i);u&&u.data(t,s,a)}))}))},i})),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t,t.getSize))}(window,(function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var s=i.prototype;return s.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},s.destroy=function(){this.unselect(),this.element.style.position="";var t=this.parent.originSide;this.element.style[t]="",this.element.removeAttribute("aria-hidden")},s.getSize=function(){this.size=e(this.element)},s.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},s.updateTarget=s.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},s.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},s.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},s.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},s.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},s.remove=function(){this.element.parentNode.removeChild(this.element)},i})),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/slide",e):"object"==typeof module&&module.exports?module.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())}(window,(function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){if(this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length){this.x=t.x;var e=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=t.size[e]}},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),i=e?e.size[t]:0,s=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+s*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.cells.forEach((function(t){t.select()}))},e.unselect=function(){this.cells.forEach((function(t){t.unselect()}))},e.getCellElements=function(){return this.cells.map((function(t){return t.element}))},t})),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t,t.fizzyUIUtils))}(window,(function(t,e){var i={startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var t=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating){var e=this;requestAnimationFrame((function(){e.animate()}))}},positionSlider:function(){var t=this.x;this.options.wrapAround&&this.cells.length>1&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),this.setTranslateX(t,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(t,e){t+=this.cursorPosition,t=this.options.rightToLeft?-t:t;var i=this.getPositionValue(t);this.slider.style.transform=e?"translate3d("+i+",0,0)":"translateX("+i+")"},dispatchScrollEvent:function(){var t=this.slides[0];if(t){var e=-this.x-t.target,i=e/this.slidesWidth;this.dispatchEvent("scroll",null,[i,e])}},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},settle:function(t){!this.isPointerDown&&Math.round(100*this.x)==Math.round(100*t)&&this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(t){var e=this.cursorPosition+t;this._shiftCells(this.beforeShiftCells,e,-1);var i=this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,i,1)},_shiftCells:function(t,e,i){for(var s=0;s<t.length;s++){var n=t[s],r=e>0?i:0;n.wrapShift(r),e-=n.size.outerWidth}},_unshiftCells:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(t){this.velocity+=t},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){if(this.isDraggable&&this.isPointerDown){var t=this.dragX-this.x-this.velocity;this.applyForce(t)}},applySelectedAttraction:function(){if(!(this.isDraggable&&this.isPointerDown)&&!this.isFreeScrolling&&this.slides.length){var t=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction;this.applyForce(t)}}};return i})),function(t,e){if("function"==typeof define&&define.amd)define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],(function(i,s,n,r,o,a){return e(t,i,s,n,r,o,a)}));else if("object"==typeof module&&module.exports)module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate"));else{var i=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,i.Cell,i.Slide,i.animatePrototype)}}(window,(function(t,e,i,s,n,r,o){var a=t.jQuery,h=t.getComputedStyle,l=t.console;function c(t,e){for(t=s.makeArray(t);t.length;)e.appendChild(t.shift())}var u=0,d={};function p(t,e){var i=s.getQueryElement(t);if(i){if(this.element=i,this.element.flickityGUID){var n=d[this.element.flickityGUID];return n&&n.option(e),n}a&&(this.$element=a(this.element)),this.options=s.extend({},this.constructor.defaults),this.option(e),this._create()}else l&&l.error("Bad element for Flickity: "+(i||t))}p.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},p.createMethods=[];var f=p.prototype;s.extend(f,e.prototype),f._create=function(){var e=this.guid=++u;for(var i in this.element.flickityGUID=e,d[e]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&t.addEventListener("resize",this),this.options.on){var s=this.options.on[i];this.on(i,s)}p.createMethods.forEach((function(t){this[t]()}),this),this.options.watchCSS?this.watchCSS():this.activate()},f.option=function(t){s.extend(this.options,t)},f.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),c(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},f._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},f._filterFindCellElements=function(t){return s.filterFindElements(t,this.options.cellSelector)},f.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},f._makeCells=function(t){return this._filterFindCellElements(t).map((function(t){return new n(t,this)}),this)},f.getLastCell=function(){return this.cells[this.cells.length-1]},f.getLastSlide=function(){return this.slides[this.slides.length-1]},f.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},f._positionCells=function(t){t=t||0,this.maxCellHeight=t&&this.maxCellHeight||0;var e=0;if(t>0){var i=this.cells[t-1];e=i.x+i.size.outerWidth}for(var s=this.cells.length,n=t;n<s;n++){var r=this.cells[n];r.setPosition(e),e+=r.size.outerWidth,this.maxCellHeight=Math.max(r.size.outerHeight,this.maxCellHeight)}this.slideableWidth=e,this.updateSlides(),this._containSlides(),this.slidesWidth=s?this.getLastSlide().target-this.slides[0].target:0},f._sizeCells=function(t){t.forEach((function(t){t.getSize()}))},f.updateSlides=function(){if(this.slides=[],this.cells.length){var t=new r(this);this.slides.push(t);var e="left"==this.originSide?"marginRight":"marginLeft",i=this._getCanCellFit();this.cells.forEach((function(s,n){if(t.cells.length){var o=t.outerWidth-t.firstMargin+(s.size.outerWidth-s.size[e]);i.call(this,n,o)||(t.updateTarget(),t=new r(this),this.slides.push(t)),t.addCell(s)}else t.addCell(s)}),this),t.updateTarget(),this.updateSelectedSlide()}},f._getCanCellFit=function(){var t=this.options.groupCells;if(!t)return function(){return!1};if("number"==typeof t){var e=parseInt(t,10);return function(t){return t%e!=0}}var i="string"==typeof t&&t.match(/^(\d+)%$/),s=i?parseInt(i[1],10)/100:1;return function(t,e){return e<=(this.size.innerWidth+1)*s}},f._init=f.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},f.getSize=function(){this.size=i(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var g={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return f.setCellAlign=function(){var t=g[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},f.setGallerySize=function(){if(this.options.setGallerySize){var t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=t+"px"}},f._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var t=this.cursorPosition,e=this.cells.length-1;this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1)}},f._getGapCells=function(t,e,i){for(var s=[];t>0;){var n=this.cells[e];if(!n)break;s.push(n),e+=i,t-=n.size.outerWidth}return s},f._containSlides=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length){var t=this.options.rightToLeft,e=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight",s=this.slideableWidth-this.getLastCell().size[i],n=s<this.size.innerWidth,r=this.cursorPosition+this.cells[0].size[e],o=s-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach((function(t){n?t.target=s*this.cellAlign:(t.target=Math.max(t.target,r),t.target=Math.min(t.target,o))}),this)}},f.dispatchEvent=function(t,e,i){var s=e?[e].concat(i):i;if(this.emitEvent(t,s),a&&this.$element){var n=t+=this.options.namespaceJQueryEvents?".flickity":"";if(e){var r=new a.Event(e);r.type=t,n=r}this.$element.trigger(n,i)}},f.select=function(t,e,i){if(this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=s.modulo(t,this.slides.length)),this.slides[t])){var n=this.selectedIndex;this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[t]),t!=n&&this.dispatchEvent("change",null,[t]),this.dispatchEvent("cellSelect")}},f._wrapSelect=function(t){var e=this.slides.length;if(!(this.options.wrapAround&&e>1))return t;var i=s.modulo(t,e),n=Math.abs(i-this.selectedIndex),r=Math.abs(i+e-this.selectedIndex),o=Math.abs(i-e-this.selectedIndex);!this.isDragSelect&&r<n?t+=e:!this.isDragSelect&&o<n&&(t-=e),t<0?this.x-=this.slideableWidth:t>=e&&(this.x+=this.slideableWidth)},f.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},f.next=function(t,e){this.select(this.selectedIndex+1,t,e)},f.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),this.selectedSlide=t,t.select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},f.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},f.selectInitialIndex=function(){var t=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(t&&"string"==typeof t)if(this.queryCell(t))return void this.selectCell(t,!1,!0);var e=0;t&&this.slides[t]&&(e=t),this.select(e,!1,!0)}},f.selectCell=function(t,e,i){var s=this.queryCell(t);if(s){var n=this.getCellSlideIndex(s);this.select(n,e,i)}},f.getCellSlideIndex=function(t){for(var e=0;e<this.slides.length;e++){if(-1!=this.slides[e].cells.indexOf(t))return e}},f.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},f.getCells=function(t){t=s.makeArray(t);var e=[];return t.forEach((function(t){var i=this.getCell(t);i&&e.push(i)}),this),e},f.getCellElements=function(){return this.cells.map((function(t){return t.element}))},f.getParentCell=function(t){var e=this.getCell(t);return e||(t=s.getParent(t,".flickity-slider > *"),this.getCell(t))},f.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(1+2*t>=i)return this.getCellElements();for(var n=[],r=e-t;r<=e+t;r++){var o=this.options.wrapAround?s.modulo(r,i):r,a=this.slides[o];a&&(n=n.concat(a.getCellElements()))}return n},f.queryCell=function(t){if("number"==typeof t)return this.cells[t];if("string"==typeof t){if(t.match(/^[#.]?[\d/]/))return;t=this.element.querySelector(t)}return this.getCell(t)},f.uiChange=function(){this.emitEvent("uiChange")},f.childUIPointerDown=function(t){"touchstart"!=t.type&&t.preventDefault(),this.focus()},f.onresize=function(){this.watchCSS(),this.resize()},s.debounceMethod(p,"onresize",150),f.resize=function(){if(this.isActive){this.getSize(),this.options.wrapAround&&(this.x=s.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var t=this.selectedElements&&this.selectedElements[0];this.selectCell(t,!1,!0)}},f.watchCSS=function(){this.options.watchCSS&&(-1!=h(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},f.onkeydown=function(t){var e=document.activeElement&&document.activeElement!=this.element;if(this.options.accessibility&&!e){var i=p.keyboardHandlers[t.keyCode];i&&i.call(this)}},p.keyboardHandlers={37:function(){var t=this.options.rightToLeft?"next":"previous";this.uiChange(),this[t]()},39:function(){var t=this.options.rightToLeft?"previous":"next";this.uiChange(),this[t]()}},f.focus=function(){var e=t.pageYOffset;this.element.focus({preventScroll:!0}),t.pageYOffset!=e&&t.scrollTo(t.pageXOffset,e)},f.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach((function(t){t.destroy()})),this.element.removeChild(this.viewport),c(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},f.destroy=function(){this.deactivate(),t.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),a&&this.$element&&a.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete d[this.guid]},s.extend(f,o),p.data=function(t){var e=(t=s.getQueryElement(t))&&t.flickityGUID;return e&&d[e]},s.htmlInit(p,"flickity"),a&&a.bridget&&a.bridget("flickity",p),p.setJQuery=function(t){a=t},p.Cell=n,p.Slide=r,p})),
/*!
 * Unipointer v2.3.0
 * base class for doing one thing with pointer event
 * MIT license
 */
function(t,e){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.Unipointer=e(t,t.EvEmitter)}(window,(function(t,e){function i(){}var s=i.prototype=Object.create(e.prototype);s.bindStartEvent=function(t){this._bindStartEvent(t,!0)},s.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},s._bindStartEvent=function(e,i){var s=(i=void 0===i||i)?"addEventListener":"removeEventListener",n="mousedown";t.PointerEvent?n="pointerdown":"ontouchstart"in t&&(n="touchstart"),e[s](n,this)},s.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},s.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},s.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},s.onpointerdown=function(t){this._pointerDown(t,t)},s._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},s.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var n={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return s._bindPostStartEvents=function(e){if(e){var i=n[e.type];i.forEach((function(e){t.addEventListener(e,this)}),this),this._boundPointerEvents=i}},s._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach((function(e){t.removeEventListener(e,this)}),this),delete this._boundPointerEvents)},s.onmousemove=function(t){this._pointerMove(t,t)},s.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},s.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},s._pointerMove=function(t,e){this.pointerMove(t,e)},s.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},s.onmouseup=function(t){this._pointerUp(t,t)},s.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},s.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},s._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},s.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},s._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},s._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},s.pointerDone=function(){},s.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},s.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},s._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},s.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},i.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},i})),
/*!
 * Unidragger v2.3.1
 * Draggable base class
 * MIT license
 */
function(t,e){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.Unidragger=e(t,t.Unipointer)}(window,(function(t,e){function i(){}var s=i.prototype=Object.create(e.prototype);s.bindHandles=function(){this._bindHandles(!0)},s.unbindHandles=function(){this._bindHandles(!1)},s._bindHandles=function(e){for(var i=(e=void 0===e||e)?"addEventListener":"removeEventListener",s=e?this._touchActionValue:"",n=0;n<this.handles.length;n++){var r=this.handles[n];this._bindStartEvent(r,e),r[i]("click",this),t.PointerEvent&&(r.style.touchAction=s)}},s._touchActionValue="none",s.pointerDown=function(t,e){this.okayPointerDown(t)&&(this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var n={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},r={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return s.okayPointerDown=function(t){var e=n[t.target.nodeName],i=r[t.target.type],s=!e||i;return s||this._pointerReset(),s},s.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},s.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},s._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},s.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},s.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},s._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},s._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},s.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},s._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},s.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},s._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},s.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},s.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},s._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},s.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},i.getPointerPoint=e.getPointerPoint,i})),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],(function(i,s,n){return e(t,i,s,n)})):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)}(window,(function(t,e,i,s){s.extend(e.defaults,{draggable:">1",dragThreshold:3}),e.createMethods.push("_createDrag");var n=e.prototype;s.extend(n,i.prototype),n._touchActionValue="pan-y";var r="createTouch"in document,o=!1;n._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),r&&!o&&(t.addEventListener("touchmove",(function(){})),o=!0)},n.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},n.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},n.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=this.slides.length>1:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},n.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},n.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},n._uiChangeDrag=function(){delete this.isFreeScrolling},n.pointerDown=function(e,i){this.isDraggable?this.okayPointerDown(e)&&(this._pointerDownPreventDefault(e),this.pointerDownFocus(e),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=h(),t.addEventListener("scroll",this),this._pointerDownDefault(e,i)):this._pointerDownDefault(e,i)},n._pointerDownDefault=function(t,e){this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[e])};var a={INPUT:!0,TEXTAREA:!0,SELECT:!0};function h(){return{x:t.pageXOffset,y:t.pageYOffset}}return n.pointerDownFocus=function(t){a[t.target.nodeName]||this.focus()},n._pointerDownPreventDefault=function(t){var e="touchstart"==t.type,i="touch"==t.pointerType,s=a[t.target.nodeName];e||i||s||t.preventDefault()},n.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},n.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},n.pointerDone=function(){t.removeEventListener("scroll",this),delete this.pointerDownScroll},n.dragStart=function(e,i){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),t.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[i]))},n.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},n.dragMove=function(t,e,i){if(this.isDraggable){t.preventDefault(),this.previousDragX=this.dragX;var s=this.options.rightToLeft?-1:1;this.options.wrapAround&&(i.x%=this.slideableWidth);var n=this.dragStartPosition+i.x*s;if(!this.options.wrapAround&&this.slides.length){var r=Math.max(-this.slides[0].target,this.dragStartPosition);n=n>r?.5*(n+r):n;var o=Math.min(-this.getLastSlide().target,this.dragStartPosition);n=n<o?.5*(n+o):n}this.dragX=n,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i])}},n.dragEnd=function(t,e){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var i=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var s=this.getRestingPosition();this.isFreeScrolling=-s>this.slides[0].target&&-s<this.getLastSlide().target}else this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e])}},n.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),s=this._getClosestResting(t,e,-1);return i.distance<s.distance?i.index:s.index},n._getClosestResting=function(t,e,i){for(var s=this.selectedIndex,n=1/0,r=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};r(e,n)&&(s+=i,n=e,null!==(e=this.getSlideDistance(-t,s)));)e=Math.abs(e);return{distance:n,index:s-i}},n.getSlideDistance=function(t,e){var i=this.slides.length,n=this.options.wrapAround&&i>1,r=n?s.modulo(e,i):e,o=this.slides[r];if(!o)return null;var a=n?this.slideableWidth*Math.floor(e/i):0;return t-(o.target+a)},n.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;var t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX;return t>0&&e>0?1:t<0&&e<0?-1:0},n.staticClick=function(t,e){var i=this.getParentCell(t.target),s=i&&i.element,n=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,s,n])},n.onscroll=function(){var t=h(),e=this.pointerDownScroll.x-t.x,i=this.pointerDownScroll.y-t.y;(Math.abs(e)>3||Math.abs(i)>3)&&this._pointerDone()},e})),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],(function(i,s,n){return e(t,i,s,n)})):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,(function(t,e,i,s){"use strict";var n="http://www.w3.org/2000/svg";function r(t,e){this.direction=t,this.parent=e,this._create()}r.prototype=Object.create(i.prototype),r.prototype._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var t=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==t;var e=this.element=document.createElement("button");e.className="flickity-button flickity-prev-next-button",e.className+=this.isPrevious?" previous":" next",e.setAttribute("type","button"),this.disable(),e.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var i=this.createSVG();e.appendChild(i),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},r.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},r.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},r.prototype.createSVG=function(){var t=document.createElementNS(n,"svg");t.setAttribute("class","flickity-button-icon"),t.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(n,"path"),i=function(t){if("string"==typeof t)return t;return"M "+t.x0+",50 L "+t.x1+","+(t.y1+50)+" L "+t.x2+","+(t.y2+50)+" L "+t.x3+",50  L "+t.x2+","+(50-t.y2)+" L "+t.x1+","+(50-t.y1)+" Z"}(this.parent.options.arrowShape);return e.setAttribute("d",i),e.setAttribute("class","arrow"),this.isLeft||e.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(e),t},r.prototype.handleEvent=s.handleEvent,r.prototype.onclick=function(){if(this.isEnabled){this.parent.uiChange();var t=this.isPrevious?"previous":"next";this.parent[t]()}},r.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},r.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},r.prototype.update=function(){var t=this.parent.slides;if(this.parent.options.wrapAround&&t.length>1)this.enable();else{var e=t.length?t.length-1:0,i=this.isPrevious?0:e;this[this.parent.selectedIndex==i?"disable":"enable"]()}},r.prototype.destroy=function(){this.deactivate(),this.allOff()},s.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");var o=e.prototype;return o._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new r(-1,this),this.nextButton=new r(1,this),this.on("activate",this.activatePrevNextButtons))},o.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},o.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=r,e})),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],(function(i,s,n){return e(t,i,s,n)})):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,(function(t,e,i,s){function n(t){this.parent=t,this._create()}n.prototype=Object.create(i.prototype),n.prototype._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},n.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},n.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},n.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;t>0?this.addDots(t):t<0&&this.removeDots(-t)},n.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[],s=this.dots.length,n=s+t,r=s;r<n;r++){var o=document.createElement("li");o.className="dot",o.setAttribute("aria-label","Page dot "+(r+1)),e.appendChild(o),i.push(o)}this.holder.appendChild(e),this.dots=this.dots.concat(i)},n.prototype.removeDots=function(t){this.dots.splice(this.dots.length-t,t).forEach((function(t){this.holder.removeChild(t)}),this)},n.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},n.prototype.onTap=n.prototype.onClick=function(t){var e=t.target;if("LI"==e.nodeName){this.parent.uiChange();var i=this.dots.indexOf(e);this.parent.select(i)}},n.prototype.destroy=function(){this.deactivate(),this.allOff()},e.PageDots=n,s.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");var r=e.prototype;return r._createPageDots=function(){this.options.pageDots&&(this.pageDots=new n(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},r.activatePageDots=function(){this.pageDots.activate()},r.updateSelectedPageDots=function(){this.pageDots.updateSelected()},r.updatePageDots=function(){this.pageDots.setDots()},r.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=n,e})),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],(function(t,i,s){return e(t,i,s)})):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)}(window,(function(t,e,i){function s(t){this.parent=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}s.prototype=Object.create(t.prototype),s.prototype.play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},s.prototype.tick=function(){if("playing"==this.state){var t=this.parent.options.autoPlay;t="number"==typeof t?t:3e3;var e=this;this.clear(),this.timeout=setTimeout((function(){e.parent.next(!0),e.tick()}),t)}},s.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},s.prototype.clear=function(){clearTimeout(this.timeout)},s.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},s.prototype.unpause=function(){"paused"==this.state&&this.play()},s.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},s.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");var n=i.prototype;return n._createPlayer=function(){this.player=new s(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},n.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},n.playPlayer=function(){this.player.play()},n.stopPlayer=function(){this.player.stop()},n.pausePlayer=function(){this.player.pause()},n.unpausePlayer=function(){this.player.unpause()},n.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},n.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},n.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=s,i})),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],(function(i,s){return e(t,i,s)})):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,(function(t,e,i){var s=e.prototype;return s.insert=function(t,e){var i=this._makeCells(t);if(i&&i.length){var s=this.cells.length;e=void 0===e?s:e;var n=function(t){var e=document.createDocumentFragment();return t.forEach((function(t){e.appendChild(t.element)})),e}(i),r=e==s;if(r)this.slider.appendChild(n);else{var o=this.cells[e].element;this.slider.insertBefore(n,o)}if(0===e)this.cells=i.concat(this.cells);else if(r)this.cells=this.cells.concat(i);else{var a=this.cells.splice(e,s-e);this.cells=this.cells.concat(i).concat(a)}this._sizeCells(i),this.cellChange(e,!0)}},s.append=function(t){this.insert(t,this.cells.length)},s.prepend=function(t){this.insert(t,0)},s.remove=function(t){var e=this.getCells(t);if(e&&e.length){var s=this.cells.length-1;e.forEach((function(t){t.remove();var e=this.cells.indexOf(t);s=Math.min(e,s),i.removeFrom(this.cells,t)}),this),this.cellChange(s,!0)}},s.cellSizeChange=function(t){var e=this.getCell(t);if(e){e.getSize();var i=this.cells.indexOf(e);this.cellChange(i)}},s.cellChange=function(t,e){var i=this.selectedElement;this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize();var s=this.getCell(i);s&&(this.selectedIndex=this.getCellSlideIndex(s)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[t]),this.select(this.selectedIndex),e&&this.positionSliderAtSelected()},e})),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],(function(i,s){return e(t,i,s)})):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,(function(t,e,i){"use strict";e.createMethods.push("_createLazyload");var s=e.prototype;function n(t,e){this.img=t,this.flickity=e,this.load()}return s._createLazyload=function(){this.on("select",this.lazyLoad)},s.lazyLoad=function(){var t=this.options.lazyLoad;if(t){var e="number"==typeof t?t:0,s=this.getAdjacentCellElements(e),r=[];s.forEach((function(t){var e=function(t){if("IMG"==t.nodeName){var e=t.getAttribute("data-flickity-lazyload"),s=t.getAttribute("data-flickity-lazyload-src"),n=t.getAttribute("data-flickity-lazyload-srcset");if(e||s||n)return[t]}var r="img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]",o=t.querySelectorAll(r);return i.makeArray(o)}(t);r=r.concat(e)})),r.forEach((function(t){new n(t,this)}),this)}},n.prototype.handleEvent=i.handleEvent,n.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var t=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),e=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=t,e&&this.img.setAttribute("srcset",e),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},n.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},n.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},n.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),s=i&&i.element;this.flickity.cellSizeChange(s),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,s)},e.LazyLoader=n,e})),
/*!
 * Flickity v2.2.2
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2021 Metafizzy
 */
function(t,e){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}(window,(function(t){return t})),
/*!
 * Flickity asNavFor v2.0.2
 * enable asNavFor for Flickity
 */
function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t.Flickity,t.fizzyUIUtils)}(window,(function(t,e){t.createMethods.push("_createAsNavFor");var i=t.prototype;return i._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t=this.options.asNavFor;if(t){var e=this;setTimeout((function(){e.setNavCompanion(t)}))}},i.setNavCompanion=function(i){i=e.getQueryElement(i);var s=t.data(i);if(s&&s!=this){this.navCompanion=s;var n=this;this.onNavCompanionSelect=function(){n.navCompanionSelect()},s.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0)}},i.navCompanionSelect=function(t){var e=this.navCompanion&&this.navCompanion.selectedCells;if(e){var i=e[0],s=this.navCompanion.cells.indexOf(i),n=s+e.length-1,r=Math.floor(function(t,e,i){return(e-t)*i+t}(s,n,this.navCompanion.cellAlign));if(this.selectCell(r,!1,t),this.removeNavSelectedElements(),!(r>=this.cells.length)){var o=this.cells.slice(s,n+1);this.navSelectedElements=o.map((function(t){return t.element})),this.changeNavSelectedClass("add")}}},i.changeNavSelectedClass=function(t){this.navSelectedElements.forEach((function(e){e.classList[t]("is-nav-selected")}))},i.activateAsNavFor=function(){this.navCompanionSelect(!0)},i.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},i.onNavStaticClick=function(t,e,i,s){"number"==typeof s&&this.navCompanion.selectCell(s)},i.deactivateAsNavFor=function(){this.removeNavSelectedElements()},i.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},t})),
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
function(t,e){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}("undefined"!=typeof window?window:this,(function(t,e){var i=t.jQuery,s=t.console;function n(t,e){for(var i in e)t[i]=e[i];return t}var r=Array.prototype.slice;function o(t){return Array.isArray(t)?t:"object"==typeof t&&"number"==typeof t.length?r.call(t):[t]}function a(t,e,r){if(!(this instanceof a))return new a(t,e,r);var h=t;"string"==typeof t&&(h=document.querySelectorAll(t)),h?(this.elements=o(h),this.options=n({},this.options),"function"==typeof e?r=e:n(this.options,e),r&&this.on("always",r),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(this.check.bind(this))):s.error("Bad element for imagesLoaded "+(h||t))}a.prototype=Object.create(e.prototype),a.prototype.options={},a.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},a.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&h[e]){for(var i=t.querySelectorAll("img"),s=0;s<i.length;s++){var n=i[s];this.addImage(n)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(s=0;s<r.length;s++){var o=r[s];this.addElementBackgroundImages(o)}}}};var h={1:!0,9:!0,11:!0};function l(t){this.img=t}function c(t,e){this.url=t,this.element=e,this.img=new Image}return a.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,s=i.exec(e.backgroundImage);null!==s;){var n=s&&s[2];n&&this.addBackground(n,t),s=i.exec(e.backgroundImage)}},a.prototype.addImage=function(t){var e=new l(t);this.images.push(e)},a.prototype.addBackground=function(t,e){var i=new c(t,e);this.images.push(i)},a.prototype.check=function(){var t=this;function e(e,i,s){setTimeout((function(){t.progress(e,i,s)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(t){t.once("progress",e),t.check()})):this.complete()},a.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+i,t,e)},a.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},l.prototype=Object.create(e.prototype),l.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},l.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},l.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},l.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},l.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},l.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype=Object.create(l.prototype),c.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},c.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},a.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((i=e).fn.imagesLoaded=function(t,e){return new a(this,t,e).jqDeferred.promise(i(this))})},a.makeJQueryPlugin(),a})),
/*!
 * Flickity imagesLoaded v2.0.0
 * enables imagesLoaded option for Flickity
 */
function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],(function(i,s){return e(t,i,s)})):"object"==typeof module&&module.exports?module.exports=e(t,require("flickity"),require("imagesloaded")):t.Flickity=e(t,t.Flickity,t.imagesLoaded)}(window,(function(t,e,i){"use strict";e.createMethods.push("_createImagesLoaded");var s=e.prototype;return s._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},s.imagesLoaded=function(){if(this.options.imagesLoaded){var t=this;i(this.slider).on("progress",(function(e,i){var s=t.getParentCell(i.img);t.cellSizeChange(s&&s.element),t.options.freeScroll||t.positionSliderAtSelected()}))}},e}));const collectionSwipers=document.querySelectorAll(".swiper-collection");collectionSwipers.forEach((t=>{const e=t.classList.contains("noLoop");new Swiper(t,{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!e,centeredSlides:!e,freeMode:!e,zoom:{maxRatio:e?3:1}})}));const container=document.querySelector("body"),sections=document.querySelectorAll("section"),collections=document.querySelectorAll("#collections article"),navigation=document.querySelector(".navigation");gsap.registerPlugin(ScrollTrigger,ScrollToPlugin),ScrollTrigger.defaults({markers:!1}),ScrollTrigger.saveStyles(collections),ScrollTrigger.matchMedia({"(min-width: 48rem)":function(){for(let[t,e]of collections.entries()){const t=e.querySelector(".image-slider");gsap.to(t,{xPercent:()=>"-=100",ease:"none",scrollTrigger:{trigger:t,start:()=>"+=220 center",end:()=>"+="+2*t.offsetWidth,pin:!0,pinSpacing:!0,scrub:1,invalidateOnRefresh:!0,snap:.1}})}let t={skew:0},e=gsap.quickSetter("#collections .image-collection","rotate","deg"),i=gsap.utils.clamp(-1,1);ScrollTrigger.create({onUpdate:s=>{let n=i(s.getVelocity()/-1e3);Math.abs(n)>Math.abs(t.skew)&&(t.skew=n,gsap.to(t,{skew:0,duration:.1,ease:"sine",overwrite:!0,onUpdate:()=>{e(t.skew)}}))}})}}),window.onload=()=>{const t=document.querySelectorAll(".flow-image");for(let[e,i]of t.entries()){const e=i.parentElement,s=i.querySelector(".static-image");gsap.to(t[0],{x:()=>"-="+1.6*window.innerWidth,y:()=>"+="+.8*e.offsetHeight,rotate:-90*Math.random(),ease:"none",scrollTrigger:{trigger:s,start:"bottom bottom",end:"bottom top",scrub:.5}}),gsap.to(t[1],{x:()=>"+="+.3*window.innerWidth,y:()=>"+="+.4*e.offsetHeight,scale:1.5,rotate:30*Math.random(),ease:"none",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom bottom",scrub:.5}})}};var ogl=function(t){"use strict";function e(t){let e=t[0],i=t[1],s=t[2];return Math.sqrt(e*e+i*i+s*s)}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function s(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function n(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function r(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function o(t,e){let i=e[0],s=e[1],n=e[2],r=i*i+s*s+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function a(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}const h=function(){const t=[0,0,0],e=[0,0,0];return function(s,n){i(t,s),i(e,n),o(t,t),o(e,e);let r=a(t,e);return r>1?0:r<-1?Math.PI:Math.acos(r)}}();class l extends Array{constructor(t=0,e=t,i=t){return super(t,e,i),this}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}set(t,e=t,i=t){return t.length?this.copy(t):(function(t,e,i,s){t[0]=e,t[1]=i,t[2]=s}(this,t,e,i),this)}copy(t){return i(this,t),this}add(t,e){return e?s(this,t,e):s(this,this,t),this}sub(t,e){return e?n(this,t,e):n(this,this,t),this}multiply(t){var e,i,s;return t.length?(i=this,s=t,(e=this)[0]=i[0]*s[0],e[1]=i[1]*s[1],e[2]=i[2]*s[2]):r(this,this,t),this}divide(t){var e,i,s;return t.length?(i=this,s=t,(e=this)[0]=i[0]/s[0],e[1]=i[1]/s[1],e[2]=i[2]/s[2]):r(this,this,1/t),this}inverse(t=this){var e,i;return i=t,(e=this)[0]=1/i[0],e[1]=1/i[1],e[2]=1/i[2],this}len(){return e(this)}distance(t){return t?function(t,e){let i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+s*s+n*n)}(this,t):e(this)}squaredLen(){return this.squaredDistance()}squaredDistance(t){return t?function(t,e){let i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2];return i*i+s*s+n*n}(this,t):function(t){let e=t[0],i=t[1],s=t[2];return e*e+i*i+s*s}(this)}negate(t=this){var e,i;return i=t,(e=this)[0]=-i[0],e[1]=-i[1],e[2]=-i[2],this}cross(t,e){return function(t,e,i){let s=e[0],n=e[1],r=e[2],o=i[0],a=i[1],h=i[2];t[0]=n*h-r*a,t[1]=r*o-s*h,t[2]=s*a-n*o}(this,t,e),this}scale(t){return r(this,this,t),this}normalize(){return o(this,this),this}dot(t){return a(this,t)}equals(t){return e=t,this[0]===e[0]&&this[1]===e[1]&&this[2]===e[2];var e}applyMatrix4(t){return function(t,e,i){let s=e[0],n=e[1],r=e[2],o=i[3]*s+i[7]*n+i[11]*r+i[15];o=o||1,t[0]=(i[0]*s+i[4]*n+i[8]*r+i[12])/o,t[1]=(i[1]*s+i[5]*n+i[9]*r+i[13])/o,t[2]=(i[2]*s+i[6]*n+i[10]*r+i[14])/o}(this,this,t),this}applyQuaternion(t){return function(t,e,i){let s=e[0],n=e[1],r=e[2],o=i[0],a=i[1],h=i[2],l=a*r-h*n,c=h*s-o*r,u=o*n-a*s,d=a*u-h*c,p=h*l-o*u,f=o*c-a*l,g=2*i[3];l*=g,c*=g,u*=g,d*=2,p*=2,f*=2,t[0]=s+l+d,t[1]=n+c+p,t[2]=r+u+f}(this,this,t),this}angle(t){return h(this,t)}lerp(t,e){return function(t,e,i,s){let n=e[0],r=e[1],o=e[2];t[0]=n+s*(i[0]-n),t[1]=r+s*(i[1]-r),t[2]=o+s*(i[2]-o)}(this,this,t,e),this}clone(){return new l(this[0],this[1],this[2])}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}transformDirection(t){const e=this[0],i=this[1],s=this[2];return this[0]=t[0]*e+t[4]*i+t[8]*s,this[1]=t[1]*e+t[5]*i+t[9]*s,this[2]=t[2]*e+t[6]*i+t[10]*s,this.normalize()}}const c=new l;let u=0,d=0;class p{constructor(t,e={}){this.gl=t,this.attributes=e,this.id=u++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let t in e)this.addAttribute(t,e[t])}addAttribute(t,e){if(this.attributes[t]=e,e.id=d++,e.size=e.size||1,e.type=e.type||(e.data.constructor===Float32Array?this.gl.FLOAT:e.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),e.target="index"===t?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,e.normalize=e.normalize||!1,e.buffer=this.gl.createBuffer(),e.count=e.data.length/e.size,e.divisor=e.instanced||0,e.needsUpdate=!1,this.updateAttribute(e),e.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==e.count*e.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,e.count*e.divisor);this.instancedCount=e.count*e.divisor}else"index"===t?this.drawRange.count=e.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,e.count))}updateAttribute(t){this.glState.boundBuffer!==t.id&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.id),this.gl.bufferData(t.target,t.data,this.gl.STATIC_DRAW),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach(((t,e)=>{if(!this.attributes[e])return void console.warn(`active attribute ${e} not being supplied`);const i=this.attributes[e];this.gl.bindBuffer(i.target,i.buffer),this.glState.boundBuffer=i.id,this.gl.vertexAttribPointer(t,i.size,i.type,i.normalize,0,0),this.gl.enableVertexAttribArray(t),this.gl.renderer.vertexAttribDivisor(t,i.divisor)})),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:e=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach(((t,e)=>{const i=this.attributes[e];i.needsUpdate&&this.updateAttribute(i)})),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(e,this.drawRange.count,this.attributes.index.type,this.drawRange.start,this.instancedCount):this.gl.renderer.drawArraysInstanced(e,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(e,this.drawRange.count,this.attributes.index.type,this.drawRange.start):this.gl.drawArrays(e,this.drawRange.start,this.drawRange.count)}computeBoundingBox(t){!t&&this.attributes.position&&(t=this.attributes.position.data),t||console.warn("No position buffer found to compute bounds"),this.bounds||(this.bounds={min:new l,max:new l,center:new l,scale:new l,radius:1/0});const e=this.bounds.min,i=this.bounds.max,s=this.bounds.center,n=this.bounds.scale;e.set(1/0),i.set(-1/0);for(let s=0,n=t.length;s<n;s+=3){const n=t[s],r=t[s+1],o=t[s+2];e.x=Math.min(n,e.x),e.y=Math.min(r,e.y),e.z=Math.min(o,e.z),i.x=Math.max(n,i.x),i.y=Math.max(r,i.y),i.z=Math.max(o,i.z)}n.sub(i,e),s.add(e,i).divide(2)}computeBoundingSphere(t){!t&&this.attributes.position&&(t=this.attributes.position.data),t||console.warn("No position buffer found to compute bounds"),this.bounds||this.computeBoundingBox(t);let e=0;for(let i=0,s=t.length;i<s;i+=3)c.fromArray(t,i),e=Math.max(e,this.bounds.center.squaredDistance(c));this.bounds.radius=Math.sqrt(e)}remove(){this.vao&&this.gl.renderer.deleteVertexArray(this.vao);for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let f=0;const g={};class m{constructor(t,{vertex:e,fragment:i,uniforms:s={},transparent:n=!1,cullFace:r=t.BACK,frontFace:o=t.CCW,depthTest:a=!0,depthWrite:h=!0,depthFunc:l=t.LESS}={}){this.gl=t,this.uniforms=s,this.id=f++,e||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=n,this.cullFace=r,this.frontFace=o,this.depthTest=a,this.depthWrite=h,this.depthFunc=l,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));const c=t.createShader(t.VERTEX_SHADER);t.shaderSource(c,e),t.compileShader(c),""!==t.getShaderInfoLog(c)&&console.warn(`${t.getShaderInfoLog(c)}\nVertex Shader\n${y(e)}`);const u=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(u,i),t.compileShader(u),""!==t.getShaderInfoLog(u)&&console.warn(`${t.getShaderInfoLog(u)}\nFragment Shader\n${y(i)}`),this.program=t.createProgram(),t.attachShader(this.program,c),t.attachShader(this.program,u),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))return console.warn(t.getProgramInfoLog(this.program));t.deleteShader(c),t.deleteShader(u),this.uniformLocations=new Map;let d=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS);for(let e=0;e<d;e++){let i=t.getActiveUniform(this.program,e);this.uniformLocations.set(i,t.getUniformLocation(this.program,i.name));const s=i.name.match(/(\w+)/g);i.uniformName=s[0],3===s.length?(i.isStructArray=!0,i.structIndex=Number(s[1]),i.structProperty=s[2]):2===s.length&&isNaN(Number(s[1]))&&(i.isStruct=!0,i.structProperty=s[1])}this.attributeLocations=new Map;const p=[],g=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES);for(let e=0;e<g;e++){const i=t.getActiveAttrib(this.program,e),s=t.getAttribLocation(this.program,i.name);p[s]=i.name,this.attributeLocations.set(i.name,s)}this.attributeOrder=p.join("")}setBlendFunc(t,e,i,s){this.blendFunc.src=t,this.blendFunc.dst=e,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=s,t&&(this.transparent=!0)}setBlendEquation(t,e){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=e}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.blendEquation.modeRGB&&this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:t=!1}={}){let e=-1;this.gl.renderer.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.currentProgram=this.id),this.uniformLocations.forEach(((t,i)=>{let s=i.uniformName,n=this.uniforms[s];if(i.isStruct&&(n=n[i.structProperty],s+=`.${i.structProperty}`),i.isStructArray&&(n=n[i.structIndex][i.structProperty],s+=`[${i.structIndex}].${i.structProperty}`),!n)return w(`Active uniform ${s} has not been supplied`);if(n&&void 0===n.value)return w(`${s} uniform is missing a value parameter`);if(n.value.texture)return e+=1,n.value.update(e),v(this.gl,i.type,t,e);if(n.value.length&&n.value[0].texture){const s=[];return n.value.forEach((t=>{e+=1,t.update(e),s.push(e)})),v(this.gl,i.type,t,s)}v(this.gl,i.type,t,n.value)})),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function v(t,e,i,s){s=s.length?function(t){const e=t.length,i=t[0].length;if(void 0===i)return t;const s=e*i;let n=g[s];n||(g[s]=n=new Float32Array(s));for(let s=0;s<e;s++)n.set(t[s],s*i);return n}(s):s;const n=t.renderer.state.uniformLocations.get(i);if(s.length)if(void 0===n)t.renderer.state.uniformLocations.set(i,s.slice(0));else{if(function(t,e){if(t.length!==e.length)return!1;for(let i=0,s=t.length;i<s;i++)if(t[i]!==e[i])return!1;return!0}(n,s))return;n.set(s),t.renderer.state.uniformLocations.set(i,n)}else{if(n===s)return;t.renderer.state.uniformLocations.set(i,s)}switch(e){case 5126:return s.length?t.uniform1fv(i,s):t.uniform1f(i,s);case 35664:return t.uniform2fv(i,s);case 35665:return t.uniform3fv(i,s);case 35666:return t.uniform4fv(i,s);case 35670:case 5124:case 35678:case 35680:return s.length?t.uniform1iv(i,s):t.uniform1i(i,s);case 35671:case 35667:return t.uniform2iv(i,s);case 35672:case 35668:return t.uniform3iv(i,s);case 35673:case 35669:return t.uniform4iv(i,s);case 35674:return t.uniformMatrix2fv(i,!1,s);case 35675:return t.uniformMatrix3fv(i,!1,s);case 35676:return t.uniformMatrix4fv(i,!1,s)}}function y(t){let e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}let b=0;function w(t){b>100||(console.warn(t),++b>100&&console.warn("More than 100 program warnings - stopping logs."))}const x=new l;function E(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function A(t,e,i,s,n){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t}function S(t,e){let i=e[0],s=e[1],n=e[2],r=e[3],o=i*i+s*s+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=i*o,t[1]=s*o,t[2]=n*o,t[3]=r*o,t}function M(t,e,i){let s=e[0],n=e[1],r=e[2],o=e[3],a=i[0],h=i[1],l=i[2],c=i[3];return t[0]=s*c+o*a+n*l-r*h,t[1]=n*c+o*h+r*a-s*l,t[2]=r*c+o*l+s*h-n*a,t[3]=o*c-s*a-n*h-r*l,t}const C=E,_=A,F=S;class T extends Array{constructor(t=0,e=0,i=0,s=1){return super(t,e,i,s),this.onChange=()=>{},this}get x(){return this[0]}set x(t){this[0]=t,this.onChange()}get y(){return this[1]}set y(t){this[1]=t,this.onChange()}get z(){return this[2]}set z(t){this[2]=t,this.onChange()}get w(){return this[3]}set w(t){this[3]=t,this.onChange()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.onChange(),this}set(t,e,i,s){return t.length?this.copy(t):(_(this,t,e,i,s),this.onChange(),this)}rotateX(t){return function(t,e,i){i*=.5;let s=e[0],n=e[1],r=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);t[0]=s*h+o*a,t[1]=n*h+r*a,t[2]=r*h-n*a,t[3]=o*h-s*a}(this,this,t),this.onChange(),this}rotateY(t){return function(t,e,i){i*=.5;let s=e[0],n=e[1],r=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);t[0]=s*h-r*a,t[1]=n*h+o*a,t[2]=r*h+s*a,t[3]=o*h-n*a}(this,this,t),this.onChange(),this}rotateZ(t){return function(t,e,i){i*=.5;let s=e[0],n=e[1],r=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);t[0]=s*h+n*a,t[1]=n*h-s*a,t[2]=r*h+o*a,t[3]=o*h-r*a}(this,this,t),this.onChange(),this}inverse(t=this){return function(t,e){let i=e[0],s=e[1],n=e[2],r=e[3],o=i*i+s*s+n*n+r*r,a=o?1/o:0;t[0]=-i*a,t[1]=-s*a,t[2]=-n*a,t[3]=r*a}(this,t),this.onChange(),this}conjugate(t=this){var e,i;return i=t,(e=this)[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e[3]=i[3],this.onChange(),this}copy(t){return C(this,t),this.onChange(),this}normalize(t=this){return F(this,t),this.onChange(),this}multiply(t,e){return e?M(this,t,e):M(this,this,t),this.onChange(),this}dot(t){return function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,t)}fromMatrix3(t){return function(t,e){let i,s=e[0]+e[4]+e[8];if(s>0)i=Math.sqrt(s+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[3*s+s]&&(s=2);let n=(s+1)%3,r=(s+2)%3;i=Math.sqrt(e[3*s+s]-e[3*n+n]-e[3*r+r]+1),t[s]=.5*i,i=.5/i,t[3]=(e[3*n+r]-e[3*r+n])*i,t[n]=(e[3*n+s]+e[3*s+n])*i,t[r]=(e[3*r+s]+e[3*s+r])*i}}(this,t),this.onChange(),this}fromEuler(t){return function(t,e,i="YXZ"){let s=Math.sin(.5*e[0]),n=Math.cos(.5*e[0]),r=Math.sin(.5*e[1]),o=Math.cos(.5*e[1]),a=Math.sin(.5*e[2]),h=Math.cos(.5*e[2]);"XYZ"===i?(t[0]=s*o*h+n*r*a,t[1]=n*r*h-s*o*a,t[2]=n*o*a+s*r*h,t[3]=n*o*h-s*r*a):"YXZ"===i?(t[0]=s*o*h+n*r*a,t[1]=n*r*h-s*o*a,t[2]=n*o*a-s*r*h,t[3]=n*o*h+s*r*a):"ZXY"===i?(t[0]=s*o*h-n*r*a,t[1]=n*r*h+s*o*a,t[2]=n*o*a+s*r*h,t[3]=n*o*h-s*r*a):"ZYX"===i?(t[0]=s*o*h-n*r*a,t[1]=n*r*h+s*o*a,t[2]=n*o*a-s*r*h,t[3]=n*o*h+s*r*a):"YZX"===i?(t[0]=s*o*h+n*r*a,t[1]=n*r*h+s*o*a,t[2]=n*o*a-s*r*h,t[3]=n*o*h-s*r*a):"XZY"===i&&(t[0]=s*o*h-n*r*a,t[1]=n*r*h-s*o*a,t[2]=n*o*a+s*r*h,t[3]=n*o*h+s*r*a)}(this,t,t.order),this}fromAxisAngle(t,e){return function(t,e,i){i*=.5;let s=Math.sin(i);t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(i)}(this,t,e),this}slerp(t,e){return function(t,e,i,s){let n,r,o,a,h,l=e[0],c=e[1],u=e[2],d=e[3],p=i[0],f=i[1],g=i[2],m=i[3];(r=l*p+c*f+u*g+d*m)<0&&(r=-r,p=-p,f=-f,g=-g,m=-m),1-r>1e-6?(n=Math.acos(r),o=Math.sin(n),a=Math.sin((1-s)*n)/o,h=Math.sin(s*n)/o):(a=1-s,h=s),t[0]=a*l+h*p,t[1]=a*c+h*f,t[2]=a*u+h*g,t[3]=a*d+h*m}(this,this,t,e),this}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}}function L(t,e,i){let s=e[0],n=e[1],r=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],f=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=i[0],w=i[1],x=i[2],E=i[3];return t[0]=b*s+w*a+x*u+E*g,t[1]=b*n+w*h+x*d+E*m,t[2]=b*r+w*l+x*p+E*v,t[3]=b*o+w*c+x*f+E*y,b=i[4],w=i[5],x=i[6],E=i[7],t[4]=b*s+w*a+x*u+E*g,t[5]=b*n+w*h+x*d+E*m,t[6]=b*r+w*l+x*p+E*v,t[7]=b*o+w*c+x*f+E*y,b=i[8],w=i[9],x=i[10],E=i[11],t[8]=b*s+w*a+x*u+E*g,t[9]=b*n+w*h+x*d+E*m,t[10]=b*r+w*l+x*p+E*v,t[11]=b*o+w*c+x*f+E*y,b=i[12],w=i[13],x=i[14],E=i[15],t[12]=b*s+w*a+x*u+E*g,t[13]=b*n+w*h+x*d+E*m,t[14]=b*r+w*l+x*p+E*v,t[15]=b*o+w*c+x*f+E*y,t}class D extends Array{constructor(t=1,e=0,i=0,s=0,n=0,r=1,o=0,a=0,h=0,l=0,c=1,u=0,d=0,p=0,f=0,g=1){return super(t,e,i,s,n,r,o,a,h,l,c,u,d,p,f,g),this}set x(t){this[12]=t}get x(){return this[12]}set y(t){this[13]=t}get y(){return this[13]}set z(t){this[14]=t}get z(){return this[14]}set w(t){this[15]=t}get w(){return this[15]}set(t,e,i,s,n,r,o,a,h,l,c,u,d,p,f,g){return t.length?this.copy(t):(function(t,e,i,s,n,r,o,a,h,l,c,u,d,p,f,g,m){t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=r,t[5]=o,t[6]=a,t[7]=h,t[8]=l,t[9]=c,t[10]=u,t[11]=d,t[12]=p,t[13]=f,t[14]=g,t[15]=m}(this,t,e,i,s,n,r,o,a,h,l,c,u,d,p,f,g),this)}translate(t,e=this){return function(t,e,i){let s,n,r,o,a,h,l,c,u,d,p,f,g=i[0],m=i[1],v=i[2];e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(s=e[0],n=e[1],r=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],f=e[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=h,t[6]=l,t[7]=c,t[8]=u,t[9]=d,t[10]=p,t[11]=f,t[12]=s*g+a*m+u*v+e[12],t[13]=n*g+h*m+d*v+e[13],t[14]=r*g+l*m+p*v+e[14],t[15]=o*g+c*m+f*v+e[15])}(this,e,t),this}rotateX(t,e=this){return function(t,e,i){let s=Math.sin(i),n=Math.cos(i),r=e[4],o=e[5],a=e[6],h=e[7],l=e[8],c=e[9],u=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*n+l*s,t[5]=o*n+c*s,t[6]=a*n+u*s,t[7]=h*n+d*s,t[8]=l*n-r*s,t[9]=c*n-o*s,t[10]=u*n-a*s,t[11]=d*n-h*s}(this,e,t),this}rotateY(t,e=this){return function(t,e,i){let s=Math.sin(i),n=Math.cos(i),r=e[0],o=e[1],a=e[2],h=e[3],l=e[8],c=e[9],u=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*n-l*s,t[1]=o*n-c*s,t[2]=a*n-u*s,t[3]=h*n-d*s,t[8]=r*s+l*n,t[9]=o*s+c*n,t[10]=a*s+u*n,t[11]=h*s+d*n}(this,e,t),this}rotateZ(t,e=this){return function(t,e,i){let s=Math.sin(i),n=Math.cos(i),r=e[0],o=e[1],a=e[2],h=e[3],l=e[4],c=e[5],u=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*n+l*s,t[1]=o*n+c*s,t[2]=a*n+u*s,t[3]=h*n+d*s,t[4]=l*n-r*s,t[5]=c*n-o*s,t[6]=u*n-a*s,t[7]=d*n-h*s}(this,e,t),this}scale(t,e=this){return function(t,e,i){let s=i[0],n=i[1],r=i[2];t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this,e,"number"==typeof t?[t,t,t]:t),this}multiply(t,e){return e?L(this,t,e):L(this,this,t),this}identity(){var t;return(t=this)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}copy(t){var e,i;return i=t,(e=this)[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}fromPerspective({fov:t,aspect:e,near:i,far:s}={}){return function(t,e,i,s,n){let r=1/Math.tan(e/2),o=1/(s-n);t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*o,t[15]=0}(this,t,e,i,s),this}fromOrthogonal({left:t,right:e,bottom:i,top:s,near:n,far:r}){return function(t,e,i,s,n,r,o){let a=1/(e-i),h=1/(s-n),l=1/(r-o);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*a,t[13]=(n+s)*h,t[14]=(o+r)*l,t[15]=1}(this,t,e,i,s,n,r),this}fromQuaternion(t){return function(t,e){let i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,a=s+s,h=n+n,l=i*o,c=s*o,u=s*a,d=n*o,p=n*a,f=n*h,g=r*o,m=r*a,v=r*h;t[0]=1-u-f,t[1]=c+v,t[2]=d-m,t[3]=0,t[4]=c-v,t[5]=1-l-f,t[6]=p+g,t[7]=0,t[8]=d+m,t[9]=p-g,t[10]=1-l-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return function(t,e){let i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15],y=i*a-s*o,b=i*h-n*o,w=i*l-r*o,x=s*h-n*a,E=s*l-r*a,A=n*l-r*h,S=c*g-u*f,M=c*m-d*f,C=c*v-p*f,_=u*m-d*g,F=u*v-p*g,T=d*v-p*m,L=y*T-b*F+w*_+x*C-E*M+A*S;L&&(L=1/L,t[0]=(a*T-h*F+l*_)*L,t[1]=(n*F-s*T-r*_)*L,t[2]=(g*A-m*E+v*x)*L,t[3]=(d*E-u*A-p*x)*L,t[4]=(h*C-o*T-l*M)*L,t[5]=(i*T-n*C+r*M)*L,t[6]=(m*w-f*A-v*b)*L,t[7]=(c*A-d*w+p*b)*L,t[8]=(o*F-a*C+l*S)*L,t[9]=(s*C-i*F-r*S)*L,t[10]=(f*E-g*w+v*y)*L,t[11]=(u*w-c*E-p*y)*L,t[12]=(a*M-o*_-h*S)*L,t[13]=(i*_-s*M+n*S)*L,t[14]=(g*b-f*x-m*y)*L,t[15]=(c*x-u*b+d*y)*L)}(this,t),this}compose(t,e,i){return function(t,e,i,s){let n=e[0],r=e[1],o=e[2],a=e[3],h=n+n,l=r+r,c=o+o,u=n*h,d=n*l,p=n*c,f=r*l,g=r*c,m=o*c,v=a*h,y=a*l,b=a*c,w=s[0],x=s[1],E=s[2];t[0]=(1-(f+m))*w,t[1]=(d+b)*w,t[2]=(p-y)*w,t[3]=0,t[4]=(d-b)*x,t[5]=(1-(u+m))*x,t[6]=(g+v)*x,t[7]=0,t[8]=(p+y)*E,t[9]=(g-v)*E,t[10]=(1-(u+f))*E,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1}(this,t,e,i),this}getRotation(t){return function(t,e){let i=e[0]+e[5]+e[10],s=0;i>0?(s=2*Math.sqrt(i+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s)}(t,this),this}getTranslation(t){var e,i;return i=this,(e=t)[0]=i[12],e[1]=i[13],e[2]=i[14],this}getScaling(t){return function(t,e){let i=e[0],s=e[1],n=e[2],r=e[4],o=e[5],a=e[6],h=e[8],l=e[9],c=e[10];t[0]=Math.sqrt(i*i+s*s+n*n),t[1]=Math.sqrt(r*r+o*o+a*a),t[2]=Math.sqrt(h*h+l*l+c*c)}(t,this),this}getMaxScaleOnAxis(){return function(t){let e=t[0],i=t[1],s=t[2],n=t[4],r=t[5],o=t[6],a=t[8],h=t[9],l=t[10];const c=e*e+i*i+s*s,u=n*n+r*r+o*o,d=a*a+h*h+l*l;return Math.sqrt(Math.max(c,u,d))}(this)}lookAt(t,e,i){return function(t,e,i,s){let n=e[0],r=e[1],o=e[2],a=s[0],h=s[1],l=s[2],c=n-i[0],u=r-i[1],d=o-i[2],p=c*c+u*u+d*d;p>0&&(c*=p=1/Math.sqrt(p),u*=p,d*=p);let f=h*d-l*u,g=l*c-a*d,m=a*u-h*c;(p=f*f+g*g+m*m)>0&&(f*=p=1/Math.sqrt(p),g*=p,m*=p),t[0]=f,t[1]=g,t[2]=m,t[3]=0,t[4]=u*m-d*g,t[5]=d*f-c*m,t[6]=c*g-u*f,t[7]=0,t[8]=c,t[9]=u,t[10]=d,t[11]=0,t[12]=n,t[13]=r,t[14]=o,t[15]=1}(this,t,e,i),this}determinant(){return function(t){let e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],o=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],p=t[12],f=t[13],g=t[14],m=t[15];return(e*o-i*r)*(u*m-d*g)-(e*a-s*r)*(c*m-d*f)+(e*h-n*r)*(c*g-u*f)+(i*a-s*o)*(l*m-d*p)-(i*h-n*o)*(l*g-u*p)+(s*h-n*a)*(l*f-c*p)}(this)}}const k=new D;class P extends Array{constructor(t=0,e=t,i=t,s="YXZ"){return super(t,e,i),this.order=s,this.onChange=()=>{},this}get x(){return this[0]}set x(t){this[0]=t,this.onChange()}get y(){return this[1]}set y(t){this[1]=t,this.onChange()}get z(){return this[2]}set z(t){this[2]=t,this.onChange()}set(t,e=t,i=t){return t.length?this.copy(t):(this[0]=t,this[1]=e,this[2]=i,this.onChange(),this)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this}reorder(t){return this.order=t,this.onChange(),this}fromRotationMatrix(t,e=this.order){return function(t,e,i="YXZ"){"XYZ"===i?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):"YXZ"===i?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):"ZXY"===i?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):"ZYX"===i?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):"YZX"===i?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):"XZY"===i&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0))}(this,t,e),this}fromQuaternion(t,e=this.order){return k.fromQuaternion(t),this.fromRotationMatrix(k,e)}}class z{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new D,this.worldMatrix=new D,this.matrixAutoUpdate=!0,this.position=new l,this.quaternion=new T,this.scale=new l(1),this.rotation=new P,this.up=new l(0,1,0),this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(t,e=!0){e&&this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,e&&t&&t.addChild(this,!1)}addChild(t,e=!0){~this.children.indexOf(t)||this.children.push(t),e&&t.setParent(this,!1)}removeChild(t,e=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),e&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let e=0,i=this.children.length;e<i;e++)this.children[e].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let e=0,i=this.children.length;e<i;e++)this.children[e].traverse(t)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,e=!1){e?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}const I=new D,N=new l,R=new l;function U(t,e,i){let s=e[0],n=e[1],r=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=i[0],p=i[1],f=i[2],g=i[3],m=i[4],v=i[5],y=i[6],b=i[7],w=i[8];return t[0]=d*s+p*o+f*l,t[1]=d*n+p*a+f*c,t[2]=d*r+p*h+f*u,t[3]=g*s+m*o+v*l,t[4]=g*n+m*a+v*c,t[5]=g*r+m*h+v*u,t[6]=y*s+b*o+w*l,t[7]=y*n+b*a+w*c,t[8]=y*r+b*h+w*u,t}class B extends Array{constructor(t=1,e=0,i=0,s=0,n=1,r=0,o=0,a=0,h=1){return super(t,e,i,s,n,r,o,a,h),this}set(t,e,i,s,n,r,o,a,h){return t.length?this.copy(t):(function(t,e,i,s,n,r,o,a,h,l){t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=r,t[5]=o,t[6]=a,t[7]=h,t[8]=l}(this,t,e,i,s,n,r,o,a,h),this)}translate(t,e=this){return function(t,e,i){let s=e[0],n=e[1],r=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=i[0],p=i[1];t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=h,t[6]=d*s+p*o+l,t[7]=d*n+p*a+c,t[8]=d*r+p*h+u}(this,e,t),this}rotate(t,e=this){return function(t,e,i){let s=e[0],n=e[1],r=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=Math.sin(i),p=Math.cos(i);t[0]=p*s+d*o,t[1]=p*n+d*a,t[2]=p*r+d*h,t[3]=p*o-d*s,t[4]=p*a-d*n,t[5]=p*h-d*r,t[6]=l,t[7]=c,t[8]=u}(this,e,t),this}scale(t,e=this){return function(t,e,i){let s=i[0],n=i[1];t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]}(this,e,t),this}multiply(t,e){return e?U(this,t,e):U(this,this,t),this}identity(){var t;return(t=this)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this}copy(t){var e,i;return i=t,(e=this)[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}fromMatrix4(t){var e,i;return i=t,(e=this)[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[4],e[4]=i[5],e[5]=i[6],e[6]=i[8],e[7]=i[9],e[8]=i[10],this}fromQuaternion(t){return function(t,e){let i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,a=s+s,h=n+n,l=i*o,c=s*o,u=s*a,d=n*o,p=n*a,f=n*h,g=r*o,m=r*a,v=r*h;t[0]=1-u-f,t[3]=c-v,t[6]=d+m,t[1]=c+v,t[4]=1-l-f,t[7]=p-g,t[2]=d-m,t[5]=p+g,t[8]=1-l-u}(this,t),this}fromBasis(t,e,i){return this.set(t[0],t[1],t[2],e[0],e[1],e[2],i[0],i[1],i[2]),this}inverse(t=this){return function(t,e){let i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=c*o-a*l,d=-c*r+a*h,p=l*r-o*h,f=i*u+s*d+n*p;f&&(f=1/f,t[0]=u*f,t[1]=(-c*s+n*l)*f,t[2]=(a*s-n*o)*f,t[3]=d*f,t[4]=(c*i-n*h)*f,t[5]=(-a*i+n*r)*f,t[6]=p*f,t[7]=(-l*i+s*h)*f,t[8]=(o*i-s*r)*f)}(this,t),this}getNormalMatrix(t){return function(t,e){let i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15],y=i*a-s*o,b=i*h-n*o,w=i*l-r*o,x=s*h-n*a,E=s*l-r*a,A=n*l-r*h,S=c*g-u*f,M=c*m-d*f,C=c*v-p*f,_=u*m-d*g,F=u*v-p*g,T=d*v-p*m,L=y*T-b*F+w*_+x*C-E*M+A*S;L&&(L=1/L,t[0]=(a*T-h*F+l*_)*L,t[1]=(h*C-o*T-l*M)*L,t[2]=(o*F-a*C+l*S)*L,t[3]=(n*F-s*T-r*_)*L,t[4]=(i*T-n*C+r*M)*L,t[5]=(s*C-i*F-r*S)*L,t[6]=(g*A-m*E+v*x)*L,t[7]=(m*w-f*A-v*b)*L,t[8]=(f*E-g*w+v*y)*L)}(this,t),this}}let q=0;class O extends z{constructor(t,{geometry:e,program:i,mode:s=t.TRIANGLES,frustumCulled:n=!0,renderOrder:r=0}={}){super(t),this.gl=t,this.id=q++,this.geometry=e,this.program=i,this.mode=s,this.frustumCulled=n,this.renderOrder=r,this.modelViewMatrix=new D,this.normalMatrix=new B,this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}})}draw({camera:t}={}){this.onBeforeRender&&this.onBeforeRender({mesh:this,camera:t}),t&&(this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.position,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let e=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:e}),this.geometry.draw({mode:this.mode,program:this.program}),this.onAfterRender&&this.onAfterRender({mesh:this,camera:t})}}const j=new Uint8Array(4);function W(t){return 0==(t&t-1)}let G=0;class Y{constructor(t,{image:e,target:i=t.TEXTURE_2D,type:s=t.UNSIGNED_BYTE,format:n=t.RGBA,internalFormat:r=n,wrapS:o=t.CLAMP_TO_EDGE,wrapT:a=t.CLAMP_TO_EDGE,generateMipmaps:h=!0,minFilter:l=(h?t.NEAREST_MIPMAP_LINEAR:t.LINEAR),magFilter:c=t.LINEAR,premultiplyAlpha:u=!1,unpackAlignment:d=4,flipY:p=!0,level:f=0,width:g,height:m=g}={}){this.gl=t,this.id=G++,this.image=e,this.target=i,this.type=s,this.format=n,this.internalFormat=r,this.minFilter=l,this.magFilter=c,this.wrapS=o,this.wrapT=a,this.generateMipmaps=h,this.premultiplyAlpha=u,this.unpackAlignment=d,this.flipY=p,this.level=f,this.width=g,this.height=m,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(t=0){const e=!(this.image===this.store.image&&!this.needsUpdate);(e||this.glState.textureUnits[t]!==this.id)&&(this.gl.renderer.activeTexture(t),this.bind()),e&&(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.image?(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.gl.renderer.isWebgl2||ArrayBuffer.isView(this.image)?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image):this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image),this.generateMipmaps&&(this.gl.renderer.isWebgl2||W(this.image.width)&&W(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR))):this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,j),this.store.image=this.image,this.onUpdate&&this.onUpdate())}}class X{constructor(t,{width:e=t.canvas.width,height:i=t.canvas.height,target:s=t.FRAMEBUFFER,color:n=1,depth:r=!0,stencil:o=!1,depthTexture:a=!1,wrapS:h=t.CLAMP_TO_EDGE,wrapT:l=t.CLAMP_TO_EDGE,minFilter:c=t.LINEAR,magFilter:u=c,type:d=t.UNSIGNED_BYTE,format:p=t.RGBA,internalFormat:f=p,unpackAlignment:g,premultiplyAlpha:m}={}){this.gl=t,this.width=e,this.height=i,this.buffer=this.gl.createFramebuffer(),this.target=s,this.gl.bindFramebuffer(this.target,this.buffer),this.textures=[];for(let s=0;s<n;s++)this.textures.push(new Y(t,{width:e,height:i,wrapS:h,wrapT:l,minFilter:c,magFilter:u,type:d,format:p,internalFormat:f,unpackAlignment:g,premultiplyAlpha:m,flipY:!1,generateMipmaps:!1})),this.textures[s].update(),this.gl.framebufferTexture2D(this.target,this.gl.COLOR_ATTACHMENT0+s,this.gl.TEXTURE_2D,this.textures[s].texture,0);this.texture=this.textures[0],a&&(this.gl.renderer.isWebgl2||this.gl.renderer.getExtension("WEBGL_depth_texture"))?(this.depthTexture=new Y(t,{width:e,height:i,wrapS:h,wrapT:l,minFilter:this.gl.NEAREST,magFilter:this.gl.NEAREST,flipY:!1,format:this.gl.DEPTH_COMPONENT,internalFormat:t.renderer.isWebgl2?this.gl.DEPTH_COMPONENT24:this.gl.DEPTH_COMPONENT,type:this.gl.UNSIGNED_INT,generateMipmaps:!1}),this.depthTexture.update(),this.gl.framebufferTexture2D(this.target,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.texture,0)):(r&&!o&&(this.depthBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,e,i),this.gl.framebufferRenderbuffer(this.target,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.depthBuffer)),o&&!r&&(this.stencilBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.stencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.STENCIL_INDEX8,e,i),this.gl.framebufferRenderbuffer(this.target,this.gl.STENCIL_ATTACHMENT,this.gl.RENDERBUFFER,this.stencilBuffer)),r&&o&&(this.depthStencilBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthStencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_STENCIL,e,i),this.gl.framebufferRenderbuffer(this.target,this.gl.DEPTH_STENCIL_ATTACHMENT,this.gl.RENDERBUFFER,this.depthStencilBuffer))),this.gl.bindFramebuffer(this.target,null)}}class H extends Array{constructor(t=0,e=0,i=0){return"string"==typeof t&&([t,e,i]=H.hexToRGB(t)),super(t,e,i),this}get r(){return this[0]}set r(t){this[0]=t}get g(){return this[1]}set g(t){this[1]=t}get b(){return this[2]}set b(t){this[2]=t}set(t,e,i){return"string"==typeof t&&([t,e,i]=H.hexToRGB(t)),t.length?this.copy(t):(this[0]=t,this[1]=e,this[2]=i,this)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this}static hexToRGB(t){4===t.length&&(t=t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e||console.warn(`Unable to convert hex string ${t} to rgb values`),[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]}}function V(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Q(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function $(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Z(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}class J extends Array{constructor(t=0,e=t){return super(t,e),this}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}set(t,e=t){return t.length?this.copy(t):(function(t,e,i){t[0]=e,t[1]=i}(this,t,e),this)}copy(t){var e,i;return i=t,(e=this)[0]=i[0],e[1]=i[1],this}add(t,e){return e?V(this,t,e):V(this,this,t),this}sub(t,e){return e?Q(this,t,e):Q(this,this,t),this}multiply(t){var e,i;return t.length?(this,i=t,(e=this)[0]=this[0]*i[0],e[1]=this[1]*i[1]):$(this,this,t),this}divide(t){var e,i;return t.length?(this,i=t,(e=this)[0]=this[0]/i[0],e[1]=this[1]/i[1]):$(this,this,1/t),this}inverse(t=this){var e,i;return i=t,(e=this)[0]=1/i[0],e[1]=1/i[1],this}len(){return Z(this)}distance(t){return t?(this,i=(e=t)[0]-this[0],s=e[1]-this[1],Math.sqrt(i*i+s*s)):Z(this);var e,i,s}squaredLen(){return this.squaredDistance()}squaredDistance(t){return t?(this,(i=(e=t)[0]-this[0])*i+(s=e[1]-this[1])*s):function(t){var e=t[0],i=t[1];return e*e+i*i}(this);var e,i,s}negate(t=this){var e,i;return i=t,(e=this)[0]=-i[0],e[1]=-i[1],this}cross(t,e){return s=e,(i=t)[0]*s[1]-i[1]*s[0];var i,s}scale(t){return $(this,this,t),this}normalize(){var t,e,i,s;return this,(s=(e=(t=this)[0])*e+(i=t[1])*i)>0&&(s=1/Math.sqrt(s)),this[0]=t[0]*s,this[1]=t[1]*s,this}dot(t){return e=t,this[0]*e[0]+this[1]*e[1];var e}equals(t){return e=t,this[0]===e[0]&&this[1]===e[1];var e}applyMatrix3(t){var e,i,s;return this,e=t,i=this[0],s=this[1],this[0]=e[0]*i+e[3]*s+e[6],this[1]=e[1]*i+e[4]*s+e[7],this}applyMatrix4(t){return function(t,e,i){let s=e[0],n=e[1];t[0]=i[0]*s+i[4]*n+i[12],t[1]=i[1]*s+i[5]*n+i[13]}(this,this,t),this}lerp(t,e){!function(t,e,i,s){var n=e[0],r=e[1];t[0]=n+s*(i[0]-n),t[1]=r+s*(i[1]-r)}(this,this,t,e)}clone(){return new J(this[0],this[1])}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t}}class K extends p{constructor(t,{width:e=1,height:i=1,widthSegments:s=1,heightSegments:n=1,attributes:r={}}={}){const o=s,a=n,h=(o+1)*(a+1),l=o*a*6,c=new Float32Array(3*h),u=new Float32Array(3*h),d=new Float32Array(2*h),p=h>65536?new Uint32Array(l):new Uint16Array(l);K.buildPlane(c,u,d,p,e,i,0,o,a),Object.assign(r,{position:{size:3,data:c},normal:{size:3,data:u},uv:{size:2,data:d},index:{data:p}}),super(t,r)}static buildPlane(t,e,i,s,n,r,o,a,h,l=0,c=1,u=2,d=1,p=-1,f=0,g=0){const m=f,v=n/a,y=r/h;for(let b=0;b<=h;b++){let w=b*y-r/2;for(let r=0;r<=a;r++,f++){let y=r*v-n/2;if(t[3*f+l]=y*d,t[3*f+c]=w*p,t[3*f+u]=o/2,e[3*f+l]=0,e[3*f+c]=0,e[3*f+u]=o>=0?1:-1,i[2*f]=r/a,i[2*f+1]=1-b/h,b===h||r===a)continue;let x=m+r+b*(a+1),E=m+r+(b+1)*(a+1),A=m+r+(b+1)*(a+1)+1,S=m+r+b*(a+1)+1;s[6*g]=x,s[6*g+1]=E,s[6*g+2]=S,s[6*g+3]=E,s[6*g+4]=A,s[6*g+5]=S,g++}}}}const tt=-1,et=0,it=1,st=2,nt=3,rt=new l,ot=new J,at=new J,ht=new l,lt=new l,ct=new l,ut=new D,dt=new l,pt=new T,ft=new l,gt=new l,mt=new T,vt=new l;class yt{constructor({objects:t,data:e}){this.objects=t,this.data=e,this.elapsed=0,this.weight=1,this.duration=e.frames.length-1}update(t=1,e){const i=e?1:this.weight/t,s=this.elapsed%this.duration,n=Math.floor(s),r=s-n,o=this.data.frames[n],a=this.data.frames[(n+1)%this.duration];this.objects.forEach(((t,e)=>{dt.fromArray(o.position,3*e),pt.fromArray(o.quaternion,4*e),ft.fromArray(o.scale,3*e),gt.fromArray(a.position,3*e),mt.fromArray(a.quaternion,4*e),vt.fromArray(a.scale,3*e),dt.lerp(gt,r),pt.slerp(mt,r),ft.lerp(vt,r),t.position.lerp(dt,i),t.quaternion.slerp(pt,i),t.scale.lerp(ft,i)}))}}const bt=new D;return t.Animation=yt,t.Box=class extends p{constructor(t,{width:e=1,height:i=1,depth:s=1,widthSegments:n=1,heightSegments:r=1,depthSegments:o=1,attributes:a={}}={}){const h=n,l=r,c=o,u=(h+1)*(l+1)*2+(h+1)*(c+1)*2+(l+1)*(c+1)*2,d=6*(h*l*2+h*c*2+l*c*2),p=new Float32Array(3*u),f=new Float32Array(3*u),g=new Float32Array(2*u),m=u>65536?new Uint32Array(d):new Uint16Array(d);let v=0,y=0;K.buildPlane(p,f,g,m,s,i,e,c,l,2,1,0,-1,-1,v,y),K.buildPlane(p,f,g,m,s,i,-e,c,l,2,1,0,1,-1,v+=(c+1)*(l+1),y+=c*l),K.buildPlane(p,f,g,m,e,s,i,c,l,0,2,1,1,1,v+=(c+1)*(l+1),y+=c*l),K.buildPlane(p,f,g,m,e,s,-i,c,l,0,2,1,1,-1,v+=(h+1)*(c+1),y+=h*c),K.buildPlane(p,f,g,m,e,i,-s,h,l,0,1,2,-1,-1,v+=(h+1)*(c+1),y+=h*c),K.buildPlane(p,f,g,m,e,i,s,h,l,0,1,2,1,-1,v+=(h+1)*(l+1),y+=h*l),Object.assign(a,{position:{size:3,data:p},normal:{size:3,data:f},uv:{size:2,data:g},index:{data:m}}),super(t,a)}},t.Camera=class extends z{constructor(t,{near:e=.1,far:i=100,fov:s=45,aspect:n=1,left:r,right:o,bottom:a,top:h}={}){super(t),this.near=e,this.far=i,this.fov=s,this.aspect=n,this.projectionMatrix=new D,this.viewMatrix=new D,this.projectionViewMatrix=new D,r||o?this.orthographic({left:r,right:o,bottom:a,top:h}):this.perspective()}perspective({near:t=this.near,far:e=this.far,fov:i=this.fov,aspect:s=this.aspect}={}){return this.projectionMatrix.fromPerspective({fov:i*(Math.PI/180),aspect:s,near:t,far:e}),this.type="perspective",this}orthographic({near:t=this.near,far:e=this.far,left:i=-1,right:s=1,bottom:n=-1,top:r=1}={}){return this.projectionMatrix.fromOrthogonal({left:i,right:s,bottom:n,top:r,near:t,far:e}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(t){return super.lookAt(t,!0),this}project(t){return t.applyMatrix4(this.viewMatrix),t.applyMatrix4(this.projectionMatrix),this}unproject(t){return t.applyMatrix4(I.inverse(this.projectionMatrix)),t.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new l,new l,new l,new l,new l,new l]);const t=this.projectionViewMatrix;this.frustum[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).constant=t[15]-t[12],this.frustum[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).constant=t[15]+t[12],this.frustum[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).constant=t[15]+t[13],this.frustum[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).constant=t[15]-t[13],this.frustum[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).constant=t[15]-t[14],this.frustum[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).constant=t[15]+t[14];for(let t=0;t<6;t++){const e=1/this.frustum[t].distance();this.frustum[t].multiply(e),this.frustum[t].constant*=e}}frustumIntersectsMesh(t){if(!t.geometry.attributes.position)return!0;t.geometry.bounds&&t.geometry.bounds.radius!==1/0||t.geometry.computeBoundingSphere();const e=N;e.copy(t.geometry.bounds.center),e.applyMatrix4(t.worldMatrix);const i=t.geometry.bounds.radius*t.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(e,i)}frustumIntersectsSphere(t,e){const i=R;for(let s=0;s<6;s++){const n=this.frustum[s];if(i.copy(n).dot(t)+n.constant<-e)return!1}return!0}},t.Color=H,t.Cylinder=class extends p{constructor(t,{radius:e=.5,height:i=1,radialSegments:s=16,heightSegments:n=1,attributes:r={}}={}){const o=s,a=n,h=(s+1)*(n+1)+2,c=s*(2+2*n)*3,u=new Float32Array(3*h),d=new Float32Array(3*h),p=new Float32Array(2*h),f=h>65536?new Uint32Array(c):new Uint16Array(c);let g,m,v,y=0,b=new l;g=0,m=-.5*i,v=0,u[3*y+0]=g,u[3*y+1]=m,u[3*y+2]=v,b.set(g,m,v).normalize(),d[3*y]=b.x,d[3*y+1]=b.y,d[3*y+2]=b.z,p[2*y]=0,p[2*y+1]=1;let w=y;g=0,m=.5*i,v=0,u[3*++y+0]=g,u[3*y+1]=m,u[3*y+2]=v,b.set(g,m,v).normalize(),d[3*y]=b.x,d[3*y+1]=b.y,d[3*y+2]=b.z,p[2*y]=0,p[2*y+1]=0;let x=y;y++;for(var E=0;E<o+1;E++){let t=E/o;for(var A=0;A<a+1;A++){let s=A/a;g=Math.cos(t*Math.PI*2)*e,m=(s-.5)*i,v=Math.sin(t*Math.PI*2)*e,u[3*y+0]=g,u[3*y+1]=m,u[3*y+2]=v,b.set(g,m,v).normalize(),d[3*y]=b.x,d[3*y+1]=b.y,d[3*y+2]=b.z,p[2*y]=t,p[2*y+1]=1-s,y++}}let S=0,M=a+1;for(E=0;E<o;E++){let t=E+1;for(f[3*S+0]=w,f[3*S+1]=2+E*M,f[3*S+2]=2+t*M,S++,A=0;A<a;A++)f[3*S+0]=2+E*M+(A+0),f[3*S+1]=2+E*M+(A+1),f[3*S+2]=2+t*M+(A+0),f[3*++S+0]=2+t*M+(A+0),f[3*S+1]=2+E*M+(A+1),f[3*S+2]=2+t*M+(A+1),S++;f[3*S+0]=2+t*M+a,f[3*S+1]=2+E*M+a,f[3*S+2]=x,S++}Object.assign(r,{position:{size:3,data:u},normal:{size:3,data:d},uv:{size:2,data:p},index:{data:f}}),super(t,r)}},t.Euler=P,t.Flowmap=class{constructor(t,{size:e=512,falloff:i=.3,alpha:s=1,dissipation:n=.96}={}){const r=this;this.gl=t,this.uniform={value:null},this.mask={read:null,write:null,swap:()=>{let t=r.mask.read;r.mask.read=r.mask.write,r.mask.write=t,r.uniform.value=r.mask.read.texture}},function(){let i=t.renderer.extensions[`OES_texture_${t.renderer.isWebgl2?"":"half_"}float_linear`];const s={width:e,height:e,type:t.renderer.isWebgl2?t.HALF_FLOAT:t.renderer.extensions.OES_texture_half_float?t.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES:t.UNSIGNED_BYTE,format:t.RGBA,internalFormat:t.renderer.isWebgl2?t.RGBA16F:t.RGBA,minFilter:i?t.LINEAR:t.NEAREST,depth:!1};r.mask.read=new X(t,s),r.mask.write=new X(t,s),r.mask.swap()}(),this.aspect=1,this.mouse=new J,this.velocity=new J,this.mesh=new O(t,{geometry:new p(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),program:new m(t,{vertex:"\n    attribute vec2 uv;\n    attribute vec2 position;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = vec4(position, 0, 1);\n    }\n",fragment:"\n    precision highp float;\n\n    uniform sampler2D tMap;\n\n    uniform float uFalloff;\n    uniform float uAlpha;\n    uniform float uDissipation;\n\n    uniform float uAspect;\n    uniform vec2 uMouse;\n    uniform vec2 uVelocity;\n\n    varying vec2 vUv;\n\n    void main() {\n\n      vec2 cursor = vUv - uMouse;\n\n        vec4 color = texture2D(tMap, vUv) * uDissipation;\n\n        cursor.x *= uAspect;\n\n        vec3 stamp = vec3(uVelocity * vec2(1, -1), 1.0 - pow(1.0 - min(1.0, length(uVelocity)), 3.0));\n        float falloff = smoothstep(uFalloff, 0.0, length(cursor)) * uAlpha;\n\n        color.rgb = mix(color.rgb, stamp, vec3(falloff));\n\n        gl_FragColor = color;\n    }\n",uniforms:{tMap:r.uniform,uFalloff:{value:.5*i},uAlpha:{value:s},uDissipation:{value:n},uAspect:{value:1},uMouse:{value:r.mouse},uVelocity:{value:r.velocity}},depthTest:!1})})}update(){this.mesh.program.uniforms.uAspect.value=this.aspect,this.gl.renderer.render({scene:this.mesh,target:this.mask.write,clear:!1}),this.mask.swap()}},t.GPGPU=class{constructor(t,{data:e=new Float32Array(16),geometry:i=new p(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}})}){this.gl=t;const s=e;this.passes=[],this.geometry=i,this.dataLength=s.length/4,this.size=Math.pow(2,Math.ceil(Math.log(Math.ceil(Math.sqrt(this.dataLength)))/Math.LN2)),this.coords=new Float32Array(2*this.dataLength);for(let t=0;t<this.dataLength;t++){const e=t%this.size/this.size,i=Math.floor(t/this.size)/this.size;this.coords.set([e,i],2*t)}const n=(()=>{if(s.length===this.size*this.size*4)return s;{const t=new Float32Array(this.size*this.size*4);return t.set(s),t}})();this.uniform={value:new Y(t,{image:n,target:t.TEXTURE_2D,type:t.FLOAT,format:t.RGBA,internalFormat:t.renderer.isWebgl2?t.RGBA32F:t.RGBA,wrapS:t.CLAMP_TO_EDGE,wrapT:t.CLAMP_TO_EDGE,generateMipmaps:!1,minFilter:t.NEAREST,magFilter:t.NEAREST,width:this.size,flipY:!1})};const r={width:this.size,height:this.size,type:t.renderer.isWebgl2?t.HALF_FLOAT:t.renderer.extensions.OES_texture_half_float?t.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES:t.UNSIGNED_BYTE,format:t.RGBA,internalFormat:t.renderer.isWebgl2?t.RGBA16F:t.RGBA,minFilter:t.NEAREST,depth:!1,unpackAlignment:1};this.fbo={read:new X(t,r),write:new X(t,r),swap:()=>{let t=this.fbo.read;this.fbo.read=this.fbo.write,this.fbo.write=t,this.uniform.value=this.fbo.read.texture}}}addPass({vertex:t="\n    attribute vec2 uv;\n    attribute vec2 position;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = vec4(position, 0, 1);\n    }\n",fragment:e="\n    precision highp float;\n\n    uniform sampler2D tMap;\n    varying vec2 vUv;\n\n    void main() {\n        gl_FragColor = texture2D(tMap, vUv);\n    }\n",uniforms:i={},textureUniform:s="tMap",enabled:n=!0}={}){i[s]=this.uniform;const r=new m(this.gl,{vertex:t,fragment:e,uniforms:i}),o={mesh:new O(this.gl,{geometry:this.geometry,program:r}),program:r,uniforms:i,enabled:n,textureUniform:s};return this.passes.push(o),o}render(){this.passes.filter((t=>t.enabled)).forEach(((t,e)=>{this.gl.renderer.render({scene:t.mesh,target:this.fbo.write,clear:!1}),this.fbo.swap()}))}},t.Geometry=p,t.Mat3=B,t.Mat4=D,t.Mesh=O,t.NormalProgram=function(t){return new m(t,{vertex:"\nprecision highp float;\nprecision highp int;\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat3 normalMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec3 vNormal;\n\nvoid main() {\n    vNormal = normalize(normalMatrix * normal);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragment:"\nprecision highp float;\nprecision highp int;\n\nvarying vec3 vNormal;\n\nvoid main() {\n    gl_FragColor.rgb = normalize(vNormal);\n    gl_FragColor.a = 1.0;\n}\n"})},t.Orbit=function(t,{element:e=document,enabled:i=!0,target:s=new l,ease:n=.25,inertia:r=.85,enableRotate:o=!0,rotateSpeed:a=.1,enableZoom:h=!0,zoomSpeed:c=1,enablePan:u=!0,panSpeed:d=.1,minPolarAngle:p=0,maxPolarAngle:f=Math.PI,minAzimuthAngle:g=-1/0,maxAzimuthAngle:m=1/0,minDistance:v=0,maxDistance:y=1/0}={}){this.enabled=i,this.target=s,n=n||1,r=r||1,this.minDistance=v,this.maxDistance=y;const b={radius:1,phi:0,theta:0},w={radius:1,phi:0,theta:0},x={radius:1,phi:0,theta:0},E=new l,A=new l;A.copy(t.position).sub(this.target),x.radius=w.radius=A.distance(),x.theta=w.theta=Math.atan2(A.x,A.z),x.phi=w.phi=Math.acos(Math.min(Math.max(A.y/w.radius,-1),1)),this.update=()=>{w.radius*=b.radius,w.theta+=b.theta,w.phi+=b.phi,w.theta=Math.max(g,Math.min(m,w.theta)),w.phi=Math.max(p,Math.min(f,w.phi)),w.radius=Math.max(this.minDistance,Math.min(this.maxDistance,w.radius)),x.phi+=(w.phi-x.phi)*n,x.theta+=(w.theta-x.theta)*n,x.radius+=(w.radius-x.radius)*n,this.target.add(E);let e=x.radius*Math.sin(Math.max(1e-6,x.phi));A.x=e*Math.sin(x.theta),A.y=x.radius*Math.cos(x.phi),A.z=e*Math.cos(x.theta),t.position.copy(this.target).add(A),t.lookAt(this.target),b.theta*=r,b.phi*=r,E.multiply(r),b.radius=1};const S=new J,M=new J,C=new J;let _=tt;function F(){return Math.pow(.95,c)}this.mouseButtons={ORBIT:0,ZOOM:1,PAN:2};const T=(i,s)=>{let n=e===document?document.body:e;rt.copy(t.position).sub(this.target);let r=rt.distance();(function(t,e){rt.set(e[0],e[1],e[2]),rt.multiply(-t),E.add(rt)})(2*i*(r*=Math.tan((t.fov||45)/2*Math.PI/180))/n.clientHeight,t.matrix),function(t,e){rt.set(e[4],e[5],e[6]),rt.multiply(t),E.add(rt)}(2*s*r/n.clientHeight,t.matrix)};function L(t){b.radius/=t}function D(t,i){ot.set(t,i),at.sub(ot,S).multiply(a);let s=e===document?document.body:e;b.theta-=2*Math.PI*at.x/s.clientHeight,b.phi-=2*Math.PI*at.y/s.clientHeight,S.copy(ot)}function k(t,e){ot.set(t,e),at.sub(ot,M).multiply(d),T(at.x,at.y),M.copy(ot)}const P=t=>{if(this.enabled){switch(t.button){case this.mouseButtons.ORBIT:if(!1===o)return;S.set(t.clientX,t.clientY),_=et;break;case this.mouseButtons.ZOOM:if(!1===h)return;C.set(t.clientX,t.clientY),_=it;break;case this.mouseButtons.PAN:if(!1===u)return;M.set(t.clientX,t.clientY),_=st}_!==tt&&(window.addEventListener("mousemove",z,!1),window.addEventListener("mouseup",I,!1))}},z=t=>{if(this.enabled)switch(_){case et:if(!1===o)return;D(t.clientX,t.clientY);break;case it:if(!1===h)return;!function(t){ot.set(t.clientX,t.clientY),at.sub(ot,C),at.y>0?L(F()):at.y<0&&L(1/F()),C.copy(ot)}(t);break;case st:if(!1===u)return;k(t.clientX,t.clientY)}},I=()=>{this.enabled&&(document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",I,!1),_=tt)},N=t=>{this.enabled&&h&&(_===tt||_===et)&&(t.stopPropagation(),t.deltaY<0?L(1/F()):t.deltaY>0&&L(F()))},R=t=>{if(this.enabled)switch(t.preventDefault(),t.touches.length){case 1:if(!1===o)return;S.set(t.touches[0].pageX,t.touches[0].pageY),_=et;break;case 2:if(!1===h&&!1===u)return;!function(t){if(h){let e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,s=Math.sqrt(e*e+i*i);C.set(0,s)}if(u){let e=.5*(t.touches[0].pageX+t.touches[1].pageX),i=.5*(t.touches[0].pageY+t.touches[1].pageY);M.set(e,i)}}(t),_=nt;break;default:_=tt}},U=t=>{if(this.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===o)return;D(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!1===h&&!1===u)return;!function(t){if(h){let e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,s=Math.sqrt(e*e+i*i);ot.set(0,s),at.set(0,Math.pow(ot.y/C.y,c)),L(at.y),C.copy(ot)}u&&k(.5*(t.touches[0].pageX+t.touches[1].pageX),.5*(t.touches[0].pageY+t.touches[1].pageY))}(t);break;default:_=tt}},B=()=>{this.enabled&&(_=tt)},q=t=>{this.enabled&&t.preventDefault()};this.remove=function(){e.removeEventListener("contextmenu",q,!1),e.removeEventListener("mousedown",P,!1),window.removeEventListener("wheel",N,!1),e.removeEventListener("touchstart",R,!1),e.removeEventListener("touchend",B,!1),e.removeEventListener("touchmove",U,!1),window.removeEventListener("mousemove",z,!1),window.removeEventListener("mouseup",I,!1)},e.addEventListener("contextmenu",q,!1),e.addEventListener("mousedown",P,!1),window.addEventListener("wheel",N,!1),e.addEventListener("touchstart",R,{passive:!1}),e.addEventListener("touchend",B,!1),e.addEventListener("touchmove",U,{passive:!1})},t.Plane=K,t.Post=class{constructor(t,{width:e,height:i,dpr:s,wrapS:n=t.CLAMP_TO_EDGE,wrapT:r=t.CLAMP_TO_EDGE,minFilter:o=t.LINEAR,magFilter:a=t.LINEAR,geometry:h=new p(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}})}={}){this.gl=t,this.options={wrapS:n,wrapT:r,minFilter:o,magFilter:a},this.passes=[],this.geometry=h;const l=this.fbo={read:null,write:null,swap:()=>{let t=l.read;l.read=l.write,l.write=t}};this.resize({width:e,height:i,dpr:s})}addPass({vertex:t="\n    attribute vec2 uv;\n    attribute vec2 position;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = vec4(position, 0, 1);\n    }\n",fragment:e="\n    precision highp float;\n\n    uniform sampler2D tMap;\n    varying vec2 vUv;\n\n    void main() {\n        gl_FragColor = texture2D(tMap, vUv);\n    }\n",uniforms:i={},textureUniform:s="tMap",enabled:n=!0}={}){i[s]={value:this.fbo.read.texture};const r=new m(this.gl,{vertex:t,fragment:e,uniforms:i}),o={mesh:new O(this.gl,{geometry:this.geometry,program:r}),program:r,uniforms:i,enabled:n,textureUniform:s};return this.passes.push(o),o}resize({width:t,height:e,dpr:i}={}){i&&(this.dpr=i),t&&(this.width=t,this.height=e||t),i=this.dpr||this.gl.renderer.dpr,t=(this.width||this.gl.renderer.width)*i,e=(this.height||this.gl.renderer.height)*i,this.options.width=t,this.options.height=e,this.fbo.read=new X(this.gl,this.options),this.fbo.write=new X(this.gl,this.options)}render({scene:t,camera:e,target:i=null,update:s=!0,sort:n=!0,frustumCull:r=!0}){const o=this.passes.filter((t=>t.enabled));this.gl.renderer.render({scene:t,camera:e,target:o.length?this.fbo.write:i,update:s,sort:n,frustumCull:r}),this.fbo.swap(),o.forEach(((t,e)=>{t.mesh.program.uniforms[t.textureUniform].value=this.fbo.read.texture,this.gl.renderer.render({scene:t.mesh,target:e===o.length-1?i:this.fbo.write,clear:!1}),this.fbo.swap()}))}},t.Program=m,t.Quat=T,t.Raycast=class{constructor(t){this.gl=t,this.origin=new l,this.direction=new l}castMouse(t,e=[0,0]){t.worldMatrix.getTranslation(this.origin),this.direction.set(e[0],e[1],.5),t.unproject(this.direction),this.direction.sub(this.origin).normalize()}intersectBounds(t){Array.isArray(t)||(t=[t]);const e=ut,i=ht,s=lt,n=[];return t.forEach((t=>{t.geometry.bounds||t.geometry.computeBoundingBox(),"sphere"===t.geometry.raycast&&t.geometry.bounds===1/0&&t.geometry.computeBoundingSphere(),e.inverse(t.worldMatrix),i.copy(this.origin).applyMatrix4(e),s.copy(this.direction).transformDirection(e);let r=0;(r="sphere"===t.geometry.raycast?this.intersectSphere(t.geometry.bounds,i,s):this.intersectBox(t.geometry.bounds,i,s))&&(t.hit||(t.hit={localPoint:new l}),t.hit.distance=r,t.hit.localPoint.copy(s).multiply(r).add(i),n.push(t))})),n.sort(((t,e)=>t.hit.distance-e.hit.distance)),n}intersectSphere(t,e=this.origin,i=this.direction){const s=ct;s.sub(t.center,e);const n=s.dot(i),r=s.dot(s)-n*n,o=t.radius*t.radius;if(r>o)return 0;const a=Math.sqrt(o-r),h=n-a,l=n+a;return h<0&&l<0?0:h<0?l:h}intersectBox(t,e=this.origin,i=this.direction){let s,n,r,o,a,h;const l=1/i.x,c=1/i.y,u=1/i.z,d=t.min,p=t.max;return s=((l>=0?d.x:p.x)-e.x)*l,n=((l>=0?p.x:d.x)-e.x)*l,r=((c>=0?d.y:p.y)-e.y)*c,s>(o=((c>=0?p.y:d.y)-e.y)*c)||r>n?0:(r>s&&(s=r),o<n&&(n=o),a=((u>=0?d.z:p.z)-e.z)*u,s>(h=((u>=0?p.z:d.z)-e.z)*u)||a>n?0:(a>s&&(s=a),h<n&&(n=h),n<0?0:s>=0?s:n))}},t.RenderTarget=X,t.Renderer=class{constructor({canvas:t=document.createElement("canvas"),width:e=300,height:i=150,dpr:s=1,alpha:n=!1,depth:r=!0,stencil:o=!1,antialias:a=!1,premultipliedAlpha:h=!1,preserveDrawingBuffer:l=!1,powerPreference:c="default",autoClear:u=!0,webgl:d=2}={}){const p={alpha:n,depth:r,stencil:o,antialias:a,premultipliedAlpha:h,preserveDrawingBuffer:l,powerPreference:c};this.dpr=s,this.alpha=n,this.color=!0,this.depth=r,this.stencil=o,this.premultipliedAlpha=h,this.autoClear=u,2===d&&(this.gl=t.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",p)||t.getContext("experimental-webgl",p)),this.gl.renderer=this,this.setSize(e,i),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES")}setSize(t,e){this.width=t,this.height=e,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=e*this.dpr,Object.assign(this.gl.canvas.style,{width:t+"px",height:e+"px"})}setViewport(t,e){this.state.viewport.width===t&&this.state.viewport.height===e||(this.state.viewport.width=t,this.state.viewport.height=e,this.gl.viewport(0,0,t,e))}enable(t){!0!==this.state[t]&&(this.gl.enable(t),this.state[t]=!0)}disable(t){!1!==this.state[t]&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,e,i,s){this.state.blendFunc.src===t&&this.state.blendFunc.dst===e&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=t,this.state.blendFunc.dst=e,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=s,void 0!==i?this.gl.blendFuncSeparate(t,e,i,s):this.gl.blendFunc(t,e))}setBlendEquation(t,e){this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===e||(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=e,void 0!==e?this.gl.blendEquationSeparate(t,e):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:e=null}={}){this.state.framebuffer!==e&&(this.state.framebuffer=e,this.gl.bindFramebuffer(t,e))}getExtension(t,e,i){return e&&this.gl[e]?this.gl[e].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),e?this.extensions[t][i].bind(this.extensions[t]):this.extensions[t])}sortOpaque(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:t.zDepth!==e.zDepth?t.zDepth-e.zDepth:e.id-t.id}sortTransparent(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.zDepth!==e.zDepth?e.zDepth-t.zDepth:e.id-t.id}sortUI(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:e.id-t.id}getRenderList({scene:t,camera:e,frustumCull:i,sort:s}){let n=[];if(e&&i&&e.updateFrustum(),t.traverse((t=>{if(!t.visible)return!0;t.draw&&(i&&t.frustumCulled&&e&&!e.frustumIntersectsMesh(t)||n.push(t))})),s){const t=[],i=[],s=[];n.forEach((n=>{n.program.transparent?n.program.depthTest?i.push(n):s.push(n):t.push(n),n.zDepth=0,0===n.renderOrder&&n.program.depthTest&&e&&(n.worldMatrix.getTranslation(x),x.applyMatrix4(e.projectionViewMatrix),n.zDepth=x.z)})),t.sort(this.sortOpaque),i.sort(this.sortTransparent),s.sort(this.sortUI),n=t.concat(i,s)}return n}render({scene:t,camera:e,target:i=null,update:s=!0,sort:n=!0,frustumCull:r=!0,clear:o}){null===i?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(o||this.autoClear&&!1!==o)&&(!this.depth||i&&i.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),s&&t.updateMatrixWorld(),e&&null===e.parent&&e.updateMatrixWorld(),this.getRenderList({scene:t,camera:e,frustumCull:r,sort:n}).forEach((t=>{t.draw({camera:e})}))}},t.Skin=class extends O{constructor(t,{rig:e,geometry:i,program:s,mode:n=t.TRIANGLES}={}){super(t,{geometry:i,program:s,mode:n}),this.createBones(e),this.createBoneTexture(),this.animations=[],Object.assign(this.program.uniforms,{boneTexture:{value:this.boneTexture},boneTextureSize:{value:this.boneTextureSize}})}createBones(t){if(this.root=new z,this.bones=[],t.bones&&t.bones.length){for(let e=0;e<t.bones.length;e++){const i=new z;i.position.fromArray(t.bindPose.position,3*e),i.quaternion.fromArray(t.bindPose.quaternion,4*e),i.scale.fromArray(t.bindPose.scale,3*e),this.bones.push(i)}t.bones.forEach(((t,e)=>{if(this.bones[e].name=t.name,-1===t.parent)return this.bones[e].setParent(this.root);this.bones[e].setParent(this.bones[t.parent])})),this.root.updateMatrixWorld(!0),this.bones.forEach((t=>{t.bindInverse=new D(...t.worldMatrix).inverse()}))}}createBoneTexture(){if(!this.bones.length)return;const t=Math.max(4,Math.pow(2,Math.ceil(Math.log(Math.sqrt(4*this.bones.length))/Math.LN2)));this.boneMatrices=new Float32Array(t*t*4),this.boneTextureSize=t,this.boneTexture=new Y(this.gl,{image:this.boneMatrices,generateMipmaps:!1,type:this.gl.FLOAT,internalFormat:this.gl.renderer.isWebgl2?this.gl.RGBA16F:this.gl.RGBA,flipY:!1,width:t})}addAnimation(t){const e=new yt({objects:this.bones,data:t});return this.animations.push(e),e}update(){let t=0;this.animations.forEach((e=>t+=e.weight)),this.animations.forEach(((e,i)=>{e.update(t,0===i)}))}draw({camera:t}={}){this.root.updateMatrixWorld(!0),this.bones.forEach(((t,e)=>{bt.multiply(t.worldMatrix,t.bindInverse),this.boneMatrices.set(bt,16*e)})),this.boneTexture&&(this.boneTexture.needsUpdate=!0),super.draw({camera:t})}},t.Sphere=class extends p{constructor(t,{radius:e=.5,widthSegments:i=16,heightSegments:s=Math.ceil(.5*i),phiStart:n=0,phiLength:r=2*Math.PI,thetaStart:o=0,thetaLength:a=Math.PI,attributes:h={}}={}){const c=i,u=s,d=n,p=r,f=o,g=a,m=(c+1)*(u+1),v=c*u*6,y=new Float32Array(3*m),b=new Float32Array(3*m),w=new Float32Array(2*m),x=m>65536?new Uint32Array(v):new Uint16Array(v);let E=0,A=0,S=0,M=f+g;const C=[];let _=new l;for(let t=0;t<=u;t++){let i=[],s=t/u;for(let t=0;t<=c;t++,E++){let n=t/c,r=-e*Math.cos(d+n*p)*Math.sin(f+s*g),o=e*Math.cos(f+s*g),a=e*Math.sin(d+n*p)*Math.sin(f+s*g);y[3*E]=r,y[3*E+1]=o,y[3*E+2]=a,_.set(r,o,a).normalize(),b[3*E]=_.x,b[3*E+1]=_.y,b[3*E+2]=_.z,w[2*E]=n,w[2*E+1]=1-s,i.push(A++)}C.push(i)}for(let t=0;t<u;t++)for(let e=0;e<c;e++){let i=C[t][e+1],s=C[t][e],n=C[t+1][e],r=C[t+1][e+1];(0!==t||f>0)&&(x[3*S]=i,x[3*S+1]=s,x[3*S+2]=r,S++),(t!==u-1||M<Math.PI)&&(x[3*S]=s,x[3*S+1]=n,x[3*S+2]=r,S++)}Object.assign(h,{position:{size:3,data:y},normal:{size:3,data:b},uv:{size:2,data:w},index:{data:x}}),super(t,h)}},t.Text=function({font:t,text:e,width:i=1/0,align:s="left",size:n=1,letterSpacing:r=0,lineHeight:o=1.4,wordSpacing:a=0,wordBreak:h=!1}){const l=this;let c,u,d,p,f;const g=/\n/,m=/\s/;function v(){d=t.common.lineHeight,p=t.common.base,f=n/p;let i=e.replace(/[ \n]/g,"").length;u={position:new Float32Array(4*i*3),uv:new Float32Array(4*i*2),id:new Float32Array(4*i),index:new Uint16Array(6*i)};for(let t=0;t<i;t++)u.id[t]=t,u.index.set([4*t,4*t+2,4*t+1,4*t+1,4*t+2,4*t+3],6*t);y()}function y(){const d=[];let p=0,v=0,y=0,w=x();function x(){const t={width:0,glyphs:[]};return d.push(t),v=p,y=0,t}let E=0;for(;p<e.length&&E<100;){E++;const t=e[p];if(!w.width&&m.test(t)){v=++p,y=0;continue}if(g.test(t)){p++,w=x();continue}const s=c[t];if(w.glyphs.length){const t=w.glyphs[w.glyphs.length-1][0];let e=b(s.id,t.id)*f;w.width+=e,y+=e}w.glyphs.push([s,w.width]);let o=0;if(m.test(t)?(v=p,y=0,o+=a*n):o+=r*n,o+=s.xadvance*f,w.width+=o,y+=o,w.width>i){if(h&&w.glyphs.length>1){w.width-=o,w.glyphs.pop(),w=x();continue}if(!h&&y!==w.width){let t=p-v+1;w.glyphs.splice(-t,t),p=v,w.width-=y,w=x();continue}}p++}w.width||d.pop(),function(e){const i=t.common.scaleW,r=t.common.scaleH;let a=.07*n,h=0;for(let t=0;t<e.length;t++){let l=e[t];for(let t=0;t<l.glyphs.length;t++){const e=l.glyphs[t][0];let n=l.glyphs[t][1];if("center"===s?n-=.5*l.width:"right"===s&&(n-=l.width),m.test(e.char))continue;n+=e.xoffset*f,a-=e.yoffset*f;let o=e.width*f,c=e.height*f;u.position.set([n,a-c,0,n,a,0,n+o,a-c,0,n+o,a,0],4*h*3);let d=e.x/i,p=e.width/i,g=1-e.y/r,v=e.height/r;u.uv.set([d,g-v,d,g,d+p,g-v,d+p,g],4*h*2),a+=e.yoffset*f,h++}a-=n*o}l.buffers=u,l.numLines=e.length,l.height=l.numLines*n*o}(d)}function b(e,i){for(let s=0;s<t.kernings.length;s++){let n=t.kernings[s];if(!(n.first<e||n.second<i))return n.first>e||n.first===e&&n.second>i?0:n.amount}return 0}c={},t.chars.forEach((t=>c[t.char]=t)),v(),this.resize=function(t){({width:i}=t),y()},this.update=function(t){({text:e}=t),v()}},t.Texture=Y,t.Transform=z,t.Vec2=J,t.Vec3=l,t.Vec4=class extends Array{constructor(t=0,e=t,i=t,s=t){return super(t,e,i,s),this}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}get w(){return this[3]}set w(t){this[3]=t}set(t,e,i,s){return t.length?this.copy(t):(A(this,t,e,i,s),this)}copy(t){return E(this,t),this}normalize(){return S(this,this),this}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},t}({});const filterAccordion=document.querySelector(".filter-accordion"),infoButtons=document.querySelectorAll(".info-button");function resetHeight(){let t=window.innerHeight+"px",e=document.documentElement;document.querySelector("body").style.height=t,e.style.setProperty("--viewport-height",t)}window.addEventListener("resize",(function(){resetHeight()})),resetHeight();for(let t of infoButtons)t.onclick=()=>{document.querySelector(".info-box").classList.toggle("info-box-open")};const lookbookCarousel=document.querySelector(".fullscreen-carousel");let lookbookCarouselInstance;if(lookbookCarousel){lookbookCarouselInstance={flkty:new Flickity(document.querySelector(".fullscreen-carousel"),{lazyLoad:1,pageDots:!1,cellSelector:".carousel-cell"}),carousel:document.querySelector(".fullscreen-carousel"),lookbookImages:document.querySelectorAll("#lookbook .image-container picture"),closeButton:document.querySelector("#close-fullscreen"),isVisible:!1},lookbookCarouselInstance.closeButton?.addEventListener("click",(()=>{lookbookCarouselInstance.carousel.style.visibility="hidden"}));for(let e=0;e<lookbookCarouselInstance.lookbookImages.length;e++){lookbookCarouselInstance.lookbookImages[e].addEventListener("click",(()=>{lookbookCarouselInstance.carousel.style.visibility="visible",lookbookCarouselInstance.flkty.select(e,!0,!0)}))}window.onresize=()=>lookbookCarouselInstance.flkty.resize()}const openTerms=document.querySelector(".open-terms");if(openTerms){const i=document.querySelector(".terms-conditions"),s=document.querySelector(" #close-terms");openTerms.onclick=()=>{i.style.visibility="visible"},s.onclick=()=>{i.style.visibility="hidden"}}!function(){var t,e=!1;document.body.addEventListener("touchstart",(function(i){i.target.closest(".flickity-slider")?(e=!0,t={x:i.touches[0].pageX,y:i.touches[0].pageY}):e=!1})),document.body.addEventListener("touchmove",(function(i){if(e&&i.cancelable){var s={x:i.touches[0].pageX-t.x,y:i.touches[0].pageY-t.y};Math.abs(s.x)>7&&i.preventDefault()}}),{passive:!1})}(),filterAccordion?.addEventListener("click",(t=>{filterAccordion.classList.toggle("is-open");let e=filterAccordion.parentNode.style,i=filterAccordion.scrollHeight,s=filterAccordion.parentNode.querySelector("ul").scrollHeight+i;filterAccordion.classList.contains("is-open")?e.height=s+"px":e.height=i+"px"})),function(){for(var t=document.querySelectorAll(".sub-menu a"),e=document.querySelectorAll("article"),i=[],s=0;s<e.length;s++){var n=e[s];i.push(n)}function r(){for(var e=window.scrollY,s=0;s<t.length;s++){var n=t[s].getAttribute("href"),r=i[s]?.offsetHeight,o=i[s]?.offsetTop;n.includes("#")&&(e+140>=o&&e+140<o+r?document.querySelector('.sub-menu a[href="'+n+'"]').classList.add("is-active"):document.querySelector('.sub-menu a[href="'+n+'"]').classList.remove("is-active"))}}r(),window.onscroll=function(){r()}}();